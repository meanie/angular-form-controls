{"version":3,"sources":["meanie-angular-form-controls.min.js","form-controls.js","check-box/check-box.js","check-boxes/check-boxes.js","radio-buttons/radio-buttons.js","select-box/select-box.js","type-ahead/type-ahead.js"],"names":["window","angular","undefined","module","factory","hasChanged","changes","previousValue","currentValue","equals","component","template","require","ngModel","transclude","bindings","model","onChange","isInverse","isDisabled","isRequired","controller","$element","$formControls","$ctrl","this","$onInit","addClass","$isEmpty","$onChanges","$validate","$setDirty","toggle","value","isChecked","options","$attrs","$log","getTrackingValue","option","index","trackBy","isObject","warn","getLabelValue","labelBy","isArray","length","optionValue","find","modelValue","asObject","classes","className","$$setOptions","allowInvalid","$options","createChild","getLabel","map","item","checked","i","findIndex","splice","push","isNullable","nullValue","nullLabel","getModelValue","isSelected","select","hasSpinner","$scope","$document","debounce","func","delay","timeout","wrapper","clearTimeout","setTimeout","isTextInput","event","keyCode","documentClickHandler","$input","contains","target","isShowingOptions","$apply","hideOptions","bind","preventDefault","stopPropagation","ensureSelectionInView","selectionIndex","$container","children","cTop","scrollTop","cBottom","clientHeight","eTop","offsetTop","eBottom","moveSelectionUp","oldIndex","moveSelectionDown","findOption","phrase","KeyCodes","ENTER","ESC","SPACE","UP","DOWN","clearPhrase","parent","next","on","$onDestroy","off","indexOf","keydown","showOptions","confirmSelection","char","String","fromCharCode","selectByInput","getSelectedLabel","toggleOptions","hasOptions","toLowerCase","regex","RegExp","label","match","o","leaveOpen","setSelection","isSelection","placeholder","onSearch","onQuery","minLength","allowNew","$q","$timeout","isControlInput","keys","TAB","isShowingResults","hideResults","searchOptions","resolve","items","filter","test","currentSearch","lastProcessedSearch","pendingSearch","attr","focus","results","isSearching","searchQuery","showResults","keyup","trim","search","hasResults","clearResults","clearSelection","_this","doSearch","_this2","reject","then"],"mappings":"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","file":"meanie-angular-form-controls.min.js","sourcesContent":["/**\n * meanie-angular-form-controls * https://github.com/meanie/angular-form-controls\n *\n * Copyright (c) 2016 Adam Reis <adam@reis.nz>\n * License: MIT\n */\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('FormControls.Component', ['CheckBox.Component', 'CheckBoxes.Component', 'RadioButtons.Component', 'SelectBox.Component', 'TypeAhead.Component'])\n\n  /**\n   * Helper service\n   */\n  .factory('$formControls', function () {\n    return {\n\n      /**\n       * Check if an item value really changed (deep checking with angular.equals)\n       */\n\n      hasChanged: function hasChanged(changes) {\n\n        //Get previous and current value\n        var previousValue = changes.previousValue;\n        var currentValue = changes.currentValue;\n\n        //If unitialized, don't trigger changes\n\n        if (previousValue === 'UNINITIALIZED_VALUE') {\n          return false;\n        }\n\n        //Check if equals\n        return !angular.equals(previousValue, currentValue);\n      }\n    };\n  });\n})(window, window.angular);\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('CheckBox.Component', [])\n\n  /**\n   * Checkbox component\n   */\n  .component('checkBox', {\n    template: '<label class=\"check-box\"\\n      ng-transclude\\n      ng-click=\"$ctrl.toggle()\"\\n      ng-class=\"{checked: $ctrl.isChecked(), disabled: $ctrl.isDisabled}\"\\n    ></label>',\n    require: {\n      ngModel: 'ngModel'\n    },\n    transclude: true,\n    bindings: {\n      model: '<ngModel',\n      onChange: '&',\n      isInverse: '<isInverse',\n      isDisabled: '<ngDisabled',\n      isRequired: '<ngRequired'\n    },\n\n    /**\n     * Component controller\n     */\n    controller: ['$element', '$formControls', function controller($element, $formControls) {\n\n      //Get instance\n      var $ctrl = this;\n\n      /**\n       * On init\n       */\n      this.$onInit = function () {\n\n        //Add checkbox wrapper class to parent component\n        $element.addClass('check-box-wrapper');\n\n        //Empty check override in order for ng-required to work properly\n        this.ngModel.$isEmpty = function () {\n          if ($ctrl.isInverse) {\n            return !!$ctrl.model;\n          }\n          return !$ctrl.model;\n        };\n      };\n\n      /**\n       * On change\n       */\n      this.$onChanges = function (changes) {\n\n        //Validate and mark as dirty if needed\n        if (changes.model) {\n          this.ngModel.$validate();\n          if ($formControls.hasChanged(changes.model)) {\n            this.ngModel.$setDirty();\n          }\n        }\n      };\n\n      /**\n       * Toggle\n       */\n      this.toggle = function () {\n\n        //Don't toggle when disabled\n        if (this.isDisabled) {\n          return;\n        }\n\n        //Get boolean value and call on change handler\n        var value = !this.model;\n        this.onChange({ value: value });\n      };\n\n      /**\n       * Check if checked\n       */\n      this.isChecked = function () {\n        return this.isInverse ? !this.model : !!this.model;\n      };\n    }]\n  });\n})(window, window.angular);\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('CheckBoxes.Component', [])\n\n  /**\n   * Checkboxes component\n   */\n  .component('checkBoxes', {\n    template: '<div class=\"check-box-group {{$ctrl.classes}}\">\\n      <label class=\"check-box\"\\n        ng-repeat=\"option in $ctrl.options\"\\n        ng-click=\"$ctrl.toggle(option, $index)\"\\n        ng-class=\"{checked: $ctrl.isChecked(option, $index), disabled: $ctrl.isDisabled}\"\\n      >{{$ctrl.getLabel(option)}}</label>\\n    </div>',\n    require: {\n      ngModel: 'ngModel'\n    },\n    bindings: {\n      model: '<ngModel',\n      options: '<',\n      onChange: '&',\n      isDisabled: '<ngDisabled',\n      isRequired: '<ngRequired'\n    },\n\n    /**\n     * Component controller\n     */\n    controller: ['$element', '$attrs', '$log', '$formControls', function controller($element, $attrs, $log, $formControls) {\n\n      //Helper vars\n      var $ctrl = this;\n      var labelBy = $attrs.labelBy || null;\n      var trackBy = $attrs.trackBy || null;\n      var asObject = $attrs.asObject === 'true';\n\n      /**\n       * Helper to get the tracking value of an option\n       */\n      function getTrackingValue(option, index) {\n\n        //Tracking by index?\n        if (trackBy === '$index') {\n          return index;\n        }\n\n        //Non object? Track by its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have tracking property\n        if (!trackBy) {\n          $log.warn('Missing track-by property for check boxes');\n          return null;\n        }\n\n        //Validate property\n        if (typeof option[trackBy] === 'undefined') {\n          $log.warn('Unknown property `' + trackBy + '` for check box tracking');\n          return null;\n        }\n\n        //Return the property\n        return option[trackBy];\n      }\n\n      /**\n       * Get label value of an option\n       */\n      function getLabelValue(option) {\n\n        //Non object? Use its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have label property\n        if (!labelBy) {\n          $log.warn('Missing label-by property for check boxes');\n          return '';\n        }\n\n        //Validate property\n        if (typeof option[labelBy] === 'undefined') {\n          $log.warn('Unknown property `' + labelBy + '` for check box label');\n          return '';\n        }\n\n        //Return the property\n        return option[labelBy];\n      }\n\n      /**\n       * Check if a certain option is checked\n       */\n      function isChecked(model, option, index) {\n\n        //Nothing selected?\n        if (!angular.isArray(model) || model.length === 0) {\n          return false;\n        }\n\n        //Get option value\n        var optionValue = getTrackingValue(option, index);\n\n        //See if present in model values\n        var find = model.find(function (model) {\n          var modelValue = getTrackingValue(model, model);\n          return modelValue === optionValue;\n        });\n        return typeof find !== 'undefined';\n      }\n\n      /**\n       * Initialization\n       */\n      this.$onInit = function () {\n\n        //Check configuration\n        if (asObject && trackBy === '$index') {\n          $log.warn('Cannot track check boxes by index if model is an object');\n          asObject = false;\n        }\n\n        //Propagate classes\n        this.classes = $element[0].className;\n        $element[0].className = '';\n\n        //Empty check override in order for ng-required to work properly\n        this.ngModel.$isEmpty = function () {\n\n          //Needed here to prevent $validate from setting the model to undefined\n          //NOTE: first approach for Angular < 1.6.0\n          if (typeof $ctrl.ngModel.$$setOptions === 'function') {\n            $ctrl.ngModel.$$setOptions({\n              allowInvalid: true\n            });\n          } else {\n            $ctrl.ngModel.$options = $ctrl.ngModel.$options.createChild({\n              allowInvalid: true\n            });\n          }\n\n          //Return check now\n          return !angular.isArray($ctrl.model) || $ctrl.model.length === 0;\n        };\n      };\n\n      /**\n       * On change\n       */\n      this.$onChanges = function (changes) {\n\n        //Must have array as options\n        if (!angular.isArray(this.options)) {\n          this.options = [];\n        }\n\n        //Validate and mark as dirty if needed\n        if (changes.model) {\n          this.ngModel.$validate();\n          if ($formControls.hasChanged(changes.model)) {\n            this.ngModel.$setDirty();\n          }\n        }\n      };\n\n      /**\n       * Get label value of an option\n       */\n      this.getLabel = function (option) {\n        return getLabelValue(option);\n      };\n\n      /**\n       * Check if given option is checked\n       */\n      this.isChecked = function (option, index) {\n        return isChecked(this.model, option, index);\n      };\n\n      /**\n       * Toggle an option\n       */\n      this.toggle = function (option, index) {\n\n        //Ignore when disabled\n        if (this.isDisabled) {\n          return;\n        }\n\n        //Initialize value of our model array\n        var value = [];\n        if (angular.isArray(this.model)) {\n          value = this.model.map(function (item) {\n            return item;\n          });\n        }\n\n        //Check if currently checked (use source model) and get the item value\n        var checked = isChecked(value, option, index);\n        var optionValue = getTrackingValue(option, index);\n\n        //If checked, remove from target model, otherwise add\n        if (checked) {\n          var i = value.findIndex(function (model) {\n            var modelValue = getTrackingValue(model, model);\n            return modelValue === optionValue;\n          });\n          value.splice(i, 1);\n        } else {\n          value.push(asObject ? option : optionValue);\n        }\n\n        //Call on change handler\n        this.onChange({ value: value });\n      };\n    }]\n  });\n})(window, window.angular);\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('RadioButtons.Component', [])\n\n  /**\n   * Radio buttons component\n   */\n  .component('radioButtons', {\n    template: '<div class=\"radio-button-group {{$ctrl.classes}}\">\\n      <label class=\"radio-button\"\\n        ng-if=\"$ctrl.isNullable\"\\n        ng-click=\"$ctrl.select(null)\"\\n        ng-class=\"{checked: $ctrl.isSelected(null), disabled: $ctrl.isDisabled}\"\\n      >{{$ctrl.nullLabel}}</label>\\n      <label class=\"radio-button\"\\n        ng-repeat=\"option in $ctrl.options\"\\n        ng-click=\"$ctrl.select(option, $index)\"\\n        ng-class=\"{checked: $ctrl.isSelected(option, $index), disabled: $ctrl.isDisabled}\"\\n      >{{$ctrl.getLabel(option)}}</label>\\n    </div>',\n    require: {\n      ngModel: 'ngModel'\n    },\n    bindings: {\n      model: '<ngModel',\n      options: '<',\n      onChange: '&',\n      isNullable: '<',\n      nullValue: '<',\n      nullLabel: '<',\n      isDisabled: '<ngDisabled',\n      isRequired: '<ngRequired'\n    },\n\n    /**\n     * Component controller\n     */\n    controller: ['$element', '$attrs', '$log', '$formControls', function controller($element, $attrs, $log, $formControls) {\n\n      //Helper vars\n      var $ctrl = this;\n      var labelBy = $attrs.labelBy || null;\n      var trackBy = $attrs.trackBy || null;\n      var asObject = $attrs.asObject === 'true';\n\n      /**\n       * Helper to get the tracking value of an option\n       */\n      function getTrackingValue(option, index) {\n\n        //Null value?\n        if (option === null) {\n          return $ctrl.nullValue;\n        }\n\n        //Tracking by index?\n        if (trackBy === '$index') {\n          return index;\n        }\n\n        //Non object? Track by its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have tracking property\n        if (!trackBy) {\n          $log.warn('Missing track-by property for radio buttons');\n          return null;\n        }\n\n        //Validate property\n        if (typeof option[trackBy] === 'undefined') {\n          $log.warn('Unknown property `' + trackBy + '` for radio tracking');\n          return null;\n        }\n\n        //Return the property\n        return option[trackBy];\n      }\n\n      /**\n       * Get the model value\n       */\n      function getModelValue(option, index) {\n\n        //If nullable and null option given, return null value\n        if ($ctrl.isNullable && option === null) {\n          return $ctrl.nullValue;\n        }\n\n        //If returning as object, return the selected option\n        if (asObject) {\n          return option;\n        }\n\n        //Otherwise, return the tracking value of the given option\n        return getTrackingValue(option, index);\n      }\n\n      /**\n       * Get label value of an option\n       */\n      function getLabelValue(option) {\n\n        //Null value?\n        if (option === null) {\n          return $ctrl.nullLabel;\n        }\n\n        //Non object? Use its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have label property\n        if (!labelBy) {\n          $log.warn('Missing label-by property for selectbox');\n          return '';\n        }\n\n        //Validate property\n        if (typeof option[labelBy] === 'undefined') {\n          $log.warn('Unknown property `' + labelBy + '` for selectbox label');\n          return '';\n        }\n\n        //Return the property\n        return option[labelBy];\n      }\n\n      /**\n       * Check if a certain option is selected\n       */\n      function isSelected(option, index) {\n\n        //Nullable and null value selected?\n        if ($ctrl.isNullable && $ctrl.model === $ctrl.nullValue && option === null) {\n          return true;\n        }\n\n        //Nothing selected?\n        if ($ctrl.model === null) {\n          return false;\n        }\n\n        //Get the model and option values\n        var modelValue = getTrackingValue($ctrl.model, $ctrl.model);\n        var optionValue = getTrackingValue(option, index);\n\n        //Compare the two\n        return modelValue === optionValue;\n      }\n\n      /**\n       * Initialization\n       */\n      this.$onInit = function () {\n\n        //Check configuration\n        if (asObject && trackBy === '$index') {\n          $log.warn('Cannot track radio buttons by index if model is an object');\n          asObject = false;\n        }\n\n        //Propagate classes\n        this.classes = $element[0].className;\n        $element[0].className = '';\n\n        //Empty check override in order for ng-required to work properly\n        this.ngModel.$isEmpty = function () {\n          if ($ctrl.isNullable) {\n            return $ctrl.model === $ctrl.nullValue;\n          }\n          return $ctrl.model === null || typeof $ctrl.model === 'undefined';\n        };\n      };\n\n      /**\n       * On change\n       */\n      this.$onChanges = function (changes) {\n\n        //Must have array as options\n        if (!angular.isArray(this.options)) {\n          this.options = [];\n        }\n\n        //Set default null value/label if not set\n        if (typeof this.nullValue === 'undefined') {\n          this.nullValue = null;\n        }\n        if (typeof this.nullLabel === 'undefined') {\n          this.nullLabel = 'None';\n        }\n\n        //Set model to null value if not defined or null\n        if (this.isNullable) {\n          if (this.model === null || typeof this.model === 'undefined') {\n            this.model = this.nullValue;\n          }\n        }\n\n        //Validate and mark as dirty if needed\n        if (changes.model) {\n          this.ngModel.$validate();\n          if ($formControls.hasChanged(changes.model)) {\n            this.ngModel.$setDirty();\n          }\n        }\n      };\n\n      /**\n       * Get label value of an option\n       */\n      this.getLabel = function (option) {\n        return getLabelValue(option);\n      };\n\n      /**\n       * Check if given option is selected\n       */\n      this.isSelected = function (option, index) {\n        return isSelected(option, index);\n      };\n\n      /**\n       * Select an option\n       */\n      this.select = function (option, index) {\n\n        //Ignore when disabled\n        if (this.isDisabled) {\n          return;\n        }\n\n        //Get the new model value and call on change handler\n        var value = getModelValue(option, index);\n        this.onChange({ value: value, option: option });\n      };\n    }]\n  });\n})(window, window.angular);\n(function (window, angular, undefined) {\n  'use strict';\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('SelectBox.Component', [])\n\n  /**\n   * Selectbox component\n   */\n  .component('selectBox', {\n    template: '<div class=\"select-box {{$ctrl.classes}}\">\\n      <div class=\"form-control-wrapper clickable\" ng-click=\"$ctrl.toggleOptions()\">\\n        <span class=\"form-control-spinner\" ng-class=\"{\\'show-spinner\\': $ctrl.hasSpinner}\">\\n          <span class=\"caret\"\\n            ng-click=\"$ctrl.toggleOptions(); $event.stopPropagation();\"\\n            ng-class=\"{disabled: $ctrl.isDisabled}\"\\n            ng-if=\"!$ctrl.hasSpinner\"\\n          ></span>\\n          <input readonly class=\"form-control\" type=\"text\"\\n            ng-value=\"$ctrl.getSelectedLabel()\"\\n            ng-keydown=\"$ctrl.keydown($event)\"\\n            ng-class=\"{disabled: ($ctrl.isDisabled || $ctrl.hasSpinner)}\">\\n          <spinner ng-if=\"$ctrl.hasSpinner\"></spinner>\\n        </span>\\n      </div>\\n      <ul class=\"select-box-options\" ng-show=\"$ctrl.isShowingOptions\">\\n        <li\\n          ng-if=\"$ctrl.isNullable || !$ctrl.hasOptions()\"\\n          ng-class=\"{selected: $ctrl.isSelection(-1)}\"\\n          ng-mouseover=\"$ctrl.setSelection(-1)\"\\n          ng-click=\"$ctrl.confirmSelection(-1)\"\\n        >{{$ctrl.nullLabel}}</li>\\n        <li\\n          ng-transclude\\n          ng-repeat=\"option in $ctrl.options\"\\n          ng-class=\"{selected: $ctrl.isSelection($index)}\"\\n          ng-mouseover=\"$ctrl.setSelection($index)\"\\n          ng-click=\"$ctrl.confirmSelection($index)\"\\n        >{{$ctrl.getLabel(option)}}</li>\\n      </ul>\\n    </div>',\n    transclude: true,\n    require: {\n      ngModel: 'ngModel'\n    },\n    bindings: {\n      model: '<ngModel',\n      options: '<',\n      onChange: '&',\n      isNullable: '<',\n      nullValue: '<',\n      nullLabel: '<',\n      isDisabled: '<ngDisabled',\n      isRequired: '<ngRequired',\n      hasSpinner: '<hasSpinner'\n    },\n\n    /**\n     * Component controller\n     */\n    controller: ['$element', '$attrs', '$log', '$formControls', '$scope', '$document', function controller($element, $attrs, $log, $formControls, $scope, $document) {\n\n      //Helper vars\n      var $ctrl = this;\n      var selectionIndex = void 0,\n          $input = void 0,\n          $container = void 0;\n      var labelBy = $attrs.labelBy || null;\n      var trackBy = $attrs.trackBy || null;\n      var asObject = $attrs.asObject === 'true';\n      var phrase = '';\n\n      //Keycodes\n      var KeyCodes = {\n        ENTER: 13,\n        ESC: 27,\n        SPACE: 32,\n        UP: 38,\n        DOWN: 40\n      };\n\n      /**\n       * Debounce helper\n       */\n      function debounce(func, delay) {\n\n        //Timeout placeholder\n        var timeout = void 0;\n\n        //Create wrapper function\n        var wrapper = function wrapper() {\n\n          //Clear any existing timeout\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n\n          //Create new timeout\n          timeout = setTimeout(function () {\n            return func();\n          }, delay);\n        };\n\n        //Return wrapper function\n        return wrapper;\n      }\n\n      /**\n       * Function to clear the phrase (debounced after 1.5 seconds)\n       */\n      var clearPhrase = debounce(function () {\n        phrase = '';\n      }, 1000);\n\n      /**\n       * Check if input was text\n       */\n      function isTextInput(event) {\n        if (event.keyCode >= 48 && event.keyCode <= 57) {\n          return true;\n        }\n        if (event.keyCode >= 65 && event.keyCode <= 90) {\n          return true;\n        }\n        if (event.keyCode === 32) {\n          return true;\n        }\n        return false;\n      }\n\n      /**\n       * Click handler for document\n       */\n      function documentClickHandler(event) {\n        if (!$input[0].contains(event.target) && $ctrl.isShowingOptions) {\n          $scope.$apply($ctrl.hideOptions.bind($ctrl));\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n\n      /**\n       * Ensure the selected option is in view\n       */\n      function ensureSelectionInView() {\n\n        //Check index\n        if (!$ctrl.isNullable && selectionIndex < 0) {\n          return;\n        }\n\n        //Find options\n        var $options = $container.children();\n\n        //Get option now, taking into account the additional nullable element\n        var option = $options[selectionIndex + ($ctrl.isNullable ? 1 : 0)];\n        if (!option) {\n          return;\n        }\n\n        //Determine container and element top and bottom\n        var cTop = $container[0].scrollTop;\n        var cBottom = cTop + $container[0].clientHeight;\n        var eTop = option.offsetTop;\n        var eBottom = eTop + option.clientHeight;\n\n        //Check if out of view\n        if (eTop < cTop) {\n          $container[0].scrollTop -= cTop - eTop;\n        } else if (eBottom > cBottom) {\n          $container[0].scrollTop += eBottom - cBottom;\n        }\n      }\n\n      /**\n       * Move selection up\n       */\n      function moveSelectionUp() {\n        var oldIndex = selectionIndex;\n        if (typeof selectionIndex === 'undefined') {\n          if ($ctrl.isNullable) {\n            selectionIndex = -1;\n          } else if ($ctrl.options.length > 0) {\n            selectionIndex = $ctrl.options.length - 1;\n          }\n        } else if (selectionIndex > ($ctrl.isNullable ? -1 : 0)) {\n          selectionIndex--;\n        }\n        if (oldIndex !== selectionIndex) {\n          ensureSelectionInView();\n        }\n      }\n\n      /**\n       * Move selection down\n       */\n      function moveSelectionDown() {\n        var oldIndex = selectionIndex;\n        if (typeof selectionIndex === 'undefined') {\n          if ($ctrl.isNullable) {\n            selectionIndex = -1;\n          } else if ($ctrl.options.length > 0) {\n            selectionIndex = 0;\n          }\n        } else if (selectionIndex < $ctrl.options.length - 1) {\n          selectionIndex++;\n        }\n        if (oldIndex !== selectionIndex) {\n          ensureSelectionInView();\n        }\n      }\n\n      /**\n       * Helper to get the tracking value of an option\n       */\n      function getTrackingValue(option, index) {\n\n        //Null value?\n        if (option === null) {\n          return $ctrl.nullValue;\n        }\n\n        //Tracking by index?\n        if (trackBy === '$index') {\n          return index;\n        }\n\n        //Non object? Track by its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have tracking property\n        if (!trackBy) {\n          $log.warn('Missing track-by property for select box');\n          return $ctrl.nullValue;\n        }\n\n        //Validate property\n        if (typeof option[trackBy] === 'undefined') {\n          $log.warn('Unknown property `' + trackBy + '` for select box tracking');\n          return $ctrl.nullValue;\n        }\n\n        //Return the property\n        return option[trackBy];\n      }\n\n      /**\n       * Get the model value\n       */\n      function getModelValue(option, index) {\n\n        //If nullable and null option given, return null value\n        if ($ctrl.isNullable && option === null) {\n          return $ctrl.nullValue;\n        }\n\n        //If returning as object, return the selected option\n        if (asObject) {\n          return option;\n        }\n\n        //Otherwise, return the tracking value of the given option\n        return getTrackingValue(option, index);\n      }\n\n      /**\n       * Get label value of an option\n       */\n      function getLabelValue(option) {\n\n        //Null value?\n        if (option === null || typeof option === 'undefined') {\n          return $ctrl.nullLabel;\n        }\n\n        //Non object? Use its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have label property\n        if (!labelBy) {\n          $log.warn('Missing label-by property for select box');\n          return '';\n        }\n\n        //Validate property\n        if (typeof option[labelBy] === 'undefined') {\n          $log.warn('Unknown property `' + labelBy + '` for select box label');\n          return '';\n        }\n\n        //Return the property\n        return option[labelBy];\n      }\n\n      /**\n       * Find the selected option based on the model value\n       */\n      function findOption(model, options) {\n\n        //Nothing selected or null value selected?\n        if (typeof model === 'undefined' || model === $ctrl.nullValue) {\n          return null;\n        }\n\n        //Tracking by index?\n        if (trackBy === '$index') {\n          if (typeof options[model] !== 'undefined') {\n            return options[model];\n          }\n          return null;\n        }\n\n        //Get the model value\n        var modelValue = getTrackingValue(model, model);\n\n        //Find matching option\n        return options.find(function (option, index) {\n          var optionValue = getTrackingValue(option, index);\n          return modelValue === optionValue;\n        });\n      }\n\n      /**\n       * Initialization\n       */\n      this.$onInit = function () {\n\n        //Check configuration\n        if (asObject && trackBy === '$index') {\n          $log.warn('Cannot track select box by index if model is an object');\n          asObject = false;\n        }\n\n        //Initialize flags\n        this.isShowingOptions = false;\n\n        //Propagate classes\n        this.classes = $element[0].className;\n        $element[0].className = '';\n\n        //Find some elements\n        $input = $element.find('input');\n        $container = $input.parent().parent().next();\n\n        //Apply document click handler\n        //NOTE: applied on body, so that it can prevent global $document handlers\n        $document.find('body').on('click', documentClickHandler);\n\n        //Empty check override in order for ng-required to work properly\n        this.ngModel.$isEmpty = function () {\n          if ($ctrl.isNullable) {\n            return $ctrl.model === $ctrl.nullValue;\n          }\n          return $ctrl.model === null || typeof $ctrl.model === 'undefined';\n        };\n      };\n\n      /**\n       * Destroy\n       */\n      this.$onDestroy = function () {\n        $document.find('body').off('click', documentClickHandler);\n      };\n\n      /**\n       * On change\n       */\n      this.$onChanges = function (changes) {\n\n        //Must have array as options\n        if (!angular.isArray(this.options)) {\n          this.options = [];\n        }\n\n        //Set default null value/label if not set\n        if (typeof this.nullValue === 'undefined') {\n          this.nullValue = null;\n        }\n        if (typeof this.nullLabel === 'undefined') {\n          this.nullLabel = '...';\n        }\n\n        //Set model to null value if not defined or null\n        if (this.isNullable) {\n          if (this.model === null || typeof this.model === 'undefined') {\n            this.model = this.nullValue;\n          }\n        }\n\n        //If disabled, hide options\n        if (this.isDisabled) {\n          this.isShowingOptions = false;\n        }\n\n        //Determine selection index\n        var option = findOption(this.model, this.options);\n        selectionIndex = this.options.indexOf(option);\n\n        //Validate and mark as dirty if needed\n        if (changes.model) {\n          this.ngModel.$validate();\n          if ($formControls.hasChanged(changes.model)) {\n            this.ngModel.$setDirty();\n          }\n        }\n      };\n\n      /**\n       * Keydown handler for input element\n       */\n      this.keydown = function (event) {\n\n        //Move selection up or down\n        if (event.keyCode === KeyCodes.UP) {\n          event.preventDefault();\n          if (this.isShowingOptions) {\n            moveSelectionUp();\n          } else {\n            this.showOptions();\n          }\n        } else if (event.keyCode === KeyCodes.DOWN) {\n          event.preventDefault();\n          if (this.isShowingOptions) {\n            moveSelectionDown();\n          } else {\n            this.showOptions();\n          }\n        }\n\n        //Confirm selection\n        else if (event.keyCode === KeyCodes.ENTER && this.isShowingOptions) {\n            event.preventDefault();\n            this.confirmSelection();\n          }\n\n          //Hide options\n          else if (event.keyCode === KeyCodes.ESC && this.isShowingOptions) {\n              event.preventDefault();\n              this.hideOptions();\n            }\n\n            //Show options\n            else if (event.keyCode === KeyCodes.ENTER && !this.isShowingOptions) {\n                event.preventDefault();\n                this.showOptions();\n              }\n\n              //Text input\n              else if (isTextInput(event)) {\n                  var char = String.fromCharCode(event.keyCode);\n                  this.selectByInput(char);\n                }\n      };\n\n      /**\n       * Get label value of selected option\n       */\n      this.getSelectedLabel = function () {\n        var option = findOption(this.model, this.options);\n        return getLabelValue(option);\n      };\n\n      /**\n       * Get label value of an option\n       */\n      this.getLabel = function (option) {\n        return getLabelValue(option);\n      };\n\n      /**\n       * Show options\n       */\n      this.showOptions = function () {\n        if (!this.isDisabled && !this.hasSpinner) {\n          this.isShowingOptions = true;\n        }\n      };\n\n      /**\n       * Hide options\n       */\n      this.hideOptions = function () {\n        this.isShowingOptions = false;\n      };\n\n      /**\n       * Toggle options\n       */\n      this.toggleOptions = function () {\n        if (this.isShowingOptions) {\n          this.hideOptions();\n        } else {\n          this.showOptions();\n        }\n      };\n\n      /**\n       * Has options check\n       */\n      this.hasOptions = function () {\n        return this.options.length > 0;\n      };\n\n      /**\n       * Select by input character(s)\n       */\n      this.selectByInput = function (char) {\n\n        //Lowercase all the things\n        char = char.toLowerCase();\n\n        //Add to phrase\n        phrase += char;\n\n        //Create regex\n        var regex = new RegExp('^' + phrase, 'i');\n\n        //Find matching option\n        var option = this.options.find(function (option) {\n          var label = getLabelValue(option);\n          return label.match(regex);\n        });\n\n        //Match found?\n        if (option) {\n          var index = this.options.findIndex(function (o) {\n            return o === option;\n          });\n          this.select(option, index, true);\n        }\n\n        //Clear phrase (debounced)\n        clearPhrase();\n      };\n\n      /**\n       * Select an option\n       */\n      this.select = function (option, index, leaveOpen) {\n\n        //Ignore when disabled\n        if (this.isDisabled) {\n          return;\n        }\n\n        //Hide options\n        if (!leaveOpen) {\n          this.hideOptions();\n        } else {\n          ensureSelectionInView();\n        }\n\n        //Get the new model value and call on change handler\n        var value = getModelValue(option, index);\n        this.onChange({ value: value, option: option });\n      };\n\n      /**\n       * Set the selection index\n       */\n      this.setSelection = function (index) {\n        selectionIndex = index;\n      };\n\n      /**\n       * Check if given index is the selection index\n       */\n      this.isSelection = function (index) {\n        return selectionIndex === index;\n      };\n\n      /**\n       * Confirm selection\n       */\n      this.confirmSelection = function (index) {\n\n        //If index not given, use current selection index\n        if (typeof index === 'undefined') {\n          index = selectionIndex;\n        }\n\n        //Initialize option\n        var option = void 0;\n\n        //Nullable and -1 index given?\n        if (this.isNullable && index === -1) {\n          option = null;\n        }\n\n        //Otherwise, take from given options\n        else {\n\n            //Validate index\n            if (!this.hasOptions() || typeof index === 'undefined' || typeof this.options[index] === 'undefined') {\n              return;\n            }\n\n            //Get option\n            option = this.options[index];\n          }\n\n        //Select option now\n        this.select(option, index);\n      };\n    }]\n  });\n})(window, window.angular);\n(function (window, angular, undefined) {\n  'use strict';\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('TypeAhead.Component', [])\n\n  /**\n   * Type ahead component\n   */\n  .component('typeAhead', {\n    template: '<div class=\"type-ahead\">\\n      <span class=\"form-control-spinner\"\\n        ng-class=\"{\\'show-spinner\\': $ctrl.isSearching}\">\\n        <input class=\"form-control\" type=\"text\"\\n          placeholder=\"{{$ctrl.placeholder}}\"\\n          ng-keydown=\"$ctrl.keydown($event)\"\\n          ng-keyup=\"$ctrl.keyup($event)\"\\n          ng-disabled=\"$ctrl.isDisabled\"\\n          ng-model=\"$ctrl.searchQuery\">\\n        <spinner></spinner>\\n      </span>\\n      <ul class=\"type-ahead-results\" ng-show=\"$ctrl.isShowingResults\">\\n        <li\\n          ng-repeat=\"item in $ctrl.results\"\\n          ng-class=\"{selected: $ctrl.isSelection($index)}\"\\n          ng-mouseover=\"$ctrl.setSelection($index)\"\\n          ng-click=\"$ctrl.confirmSelection($index)\"\\n          ng-transclude>\\n          <span ng-bind-html=\"$ctrl.getLabel(item) |\\n            markmatches:$ctrl.searchQuery:\\'strong\\'\"></span>\\n        </li>\\n      </ul>\\n    </div>',\n    transclude: true,\n    require: {\n      ngModel: 'ngModel'\n    },\n    bindings: {\n      model: '<ngModel',\n      options: '<',\n      placeholder: '@',\n      onSearch: '&',\n      onChange: '&',\n      onQuery: '&',\n      isDisabled: '<ngDisabled',\n      isRequired: '<ngRequired',\n      labelBy: '@',\n      trackBy: '@',\n      asObject: '@',\n      minLength: '@',\n      allowNew: '@'\n    },\n\n    /**\n     * Component controller\n     */\n    controller: ['$element', '$scope', '$formControls', '$attrs', '$log', '$q', '$timeout', '$document', function controller($element, $scope, $formControls, $attrs, $log, $q, $timeout, $document) {\n\n      //Helper vars\n      var $input = void 0,\n          $container = void 0,\n          $options = void 0;\n      var $ctrl = this;\n      var selectionIndex = -1;\n      var debounce = 100;\n      var labelBy = $attrs.labelBy || null;\n      var trackBy = $attrs.trackBy || null;\n      var asObject = $attrs.asObject === 'true';\n      var allowNew = $attrs.allowNew === 'true';\n\n      //Keep track of searches, prevent older searches overwriting newer ones\n      var currentSearch = 0;\n      var lastProcessedSearch = 0;\n      var pendingSearch = null;\n\n      //Keycodes\n      var KeyCodes = {\n        ENTER: 13,\n        ESC: 27,\n        SPACE: 32,\n        TAB: 9,\n        UP: 38,\n        DOWN: 40\n      };\n\n      /**\n       * Check if input was control\n       */\n      function isControlInput(event) {\n        var keys = [KeyCodes.UP, KeyCodes.DOWN, KeyCodes.ENTER, KeyCodes.ESC, KeyCodes.TAB];\n        return keys.indexOf(event.keyCode) > -1;\n      }\n\n      /**\n       * Click handler for document\n       */\n      function documentClickHandler(event) {\n        if (!$input[0].contains(event.target) && $ctrl.isShowingResults) {\n          $scope.$apply($ctrl.hideResults.bind($ctrl));\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n\n      /**\n       * Ensure the selected option is in view\n       */\n      function ensureSelectionInView() {\n\n        //Check index\n        if (!$ctrl.isNullable && selectionIndex < 0) {\n          return;\n        }\n\n        //Get option now, taking into account the additional nullable element\n        var option = $options[selectionIndex + ($ctrl.isNullable ? 1 : 0)];\n        if (!option) {\n          return;\n        }\n\n        //Determine container and element top and bottom\n        var cTop = $container[0].scrollTop;\n        var cBottom = cTop + $container[0].clientHeight;\n        var eTop = option.offsetTop;\n        var eBottom = eTop + option.clientHeight;\n\n        //Check if out of view\n        if (eTop < cTop) {\n          $container[0].scrollTop -= cTop - eTop;\n        } else if (eBottom > cBottom) {\n          $container[0].scrollTop += eBottom - cBottom;\n        }\n      }\n\n      /**\n       * Move selection up\n       */\n      function moveSelectionUp() {\n        var oldIndex = selectionIndex;\n        if (typeof selectionIndex === 'undefined') {\n          if ($ctrl.isNullable) {\n            selectionIndex = -1;\n          } else if ($ctrl.options.length > 0) {\n            selectionIndex = $ctrl.options.length - 1;\n          }\n        } else if (selectionIndex > ($ctrl.isNullable ? -1 : 0)) {\n          selectionIndex--;\n        }\n        if (oldIndex !== selectionIndex) {\n          ensureSelectionInView();\n        }\n      }\n\n      /**\n       * Move selection down\n       */\n      function moveSelectionDown() {\n        var oldIndex = selectionIndex;\n        if (typeof selectionIndex === 'undefined') {\n          if ($ctrl.isNullable) {\n            selectionIndex = -1;\n          } else if ($ctrl.options.length > 0) {\n            selectionIndex = 0;\n          }\n        } else if (selectionIndex < $ctrl.options.length - 1) {\n          selectionIndex++;\n        }\n        if (oldIndex !== selectionIndex) {\n          ensureSelectionInView();\n        }\n      }\n\n      /**\n       * Helper to get the tracking value of an option\n       */\n      function getTrackingValue(option) {\n\n        //Non object? Track by its value\n        if (option === null || !angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have tracking property\n        if (!trackBy) {\n          $log.warn('Missing track-by property for type ahead');\n          return null;\n        }\n\n        //Validate property\n        if (typeof option[trackBy] === 'undefined') {\n          $log.warn('Unknown property `' + trackBy + '` for type ahead tracking');\n          return null;\n        }\n\n        //Return the property\n        return option[trackBy];\n      }\n\n      /**\n       * Get the model value\n       */\n      function getModelValue(option) {\n\n        //If returning as object, return the selected option\n        if (asObject) {\n          return option;\n        }\n\n        //Otherwise, return the tracking value of the given option\n        return getTrackingValue(option);\n      }\n\n      /**\n       * Get label value of an option\n       */\n      function getLabelValue(option) {\n\n        //Null value?\n        if (option === null || typeof option === 'undefined') {\n          return '';\n        }\n\n        //Non object? Use its value\n        if (!angular.isObject(option)) {\n          return option;\n        }\n\n        //Must have label property\n        if (!labelBy) {\n          $log.warn('Missing label-by property for type ahead');\n          return '';\n        }\n\n        //Validate property\n        if (typeof option[labelBy] === 'undefined') {\n          $log.warn('Unknown property `' + labelBy + '` for type ahead label');\n          return '';\n        }\n\n        //Return the property\n        return option[labelBy];\n      }\n\n      /**\n       * Find the selected option based on the model value\n       */\n      function findOption(model, options) {\n\n        //Nothing selected or null value selected?\n        if (typeof model === 'undefined' || model === $ctrl.nullValue) {\n          return null;\n        }\n\n        //Tracking by index?\n        if (trackBy === '$index') {\n          if (typeof options[model] !== 'undefined') {\n            return options[model];\n          }\n          return null;\n        }\n\n        //Get the model value\n        var modelValue = getTrackingValue(model, model);\n\n        //Find matching option\n        return options.find(function (option, index) {\n          var optionValue = getTrackingValue(option, index);\n          return modelValue === optionValue;\n        });\n      }\n\n      /**\n       * Do a simple search on object property\n       */\n      function searchOptions(value) {\n        if (!value) {\n          return $q.resolve([]);\n        }\n        var regex = new RegExp('(?:^|\\\\b)(' + value + ')', 'i');\n        var items = $ctrl.options.filter(function (option) {\n          var label = getLabelValue(option);\n          return regex.test(label);\n        });\n        return $q.resolve(items);\n      }\n\n      /**\n       * Init\n       */\n      this.$onInit = function () {\n\n        //Find some elements\n        $input = $element.find('input');\n        $container = $input.parent().next();\n        $options = $container.find('li');\n\n        //Propagate focus\n        $element.attr('tabindex', -1);\n        $element.on('focus', function () {\n          $input[0].focus();\n        });\n\n        //Apply document click handler\n        //NOTE: applied on body, so that it can prevent global $document handlers\n        $document.find('body').on('click', documentClickHandler);\n\n        //Initialize results and flags\n        this.results = [];\n        this.isSearching = false;\n        this.isShowingResults = false;\n\n        //Empty check override in order for ng-required to work properly\n        this.ngModel.$isEmpty = function () {\n          if ($ctrl.model === null || typeof $ctrl.model === 'undefined') {\n            if (allowNew && $ctrl.searchQuery) {\n              return false;\n            }\n            return true;\n          }\n          return false;\n        };\n      };\n\n      /**\n       * Destroy\n       */\n      this.$onDestroy = function () {\n        $document.find('body').off('click', documentClickHandler);\n      };\n\n      /**\n       * Change handler\n       */\n      this.$onChanges = function (changes) {\n\n        //Validate and mark as dirty if needed\n        if (changes.model) {\n\n          //Only update search query when we have a model\n          //This is to prevent the input from being cleared when we go and edit\n          if (this.model) {\n            var option = void 0;\n            if (angular.isArray(this.options)) {\n              option = findOption(this.model, this.options);\n            } else if (angular.isObject(this.model)) {\n              option = this.model;\n            }\n            if (option) {\n              this.searchQuery = getLabelValue(option);\n            }\n          }\n\n          //Validate model\n          this.ngModel.$validate();\n          if ($formControls.hasChanged(changes.model)) {\n            this.ngModel.$setDirty();\n          }\n        }\n      };\n\n      /**\n       * Get label value of an option\n       */\n      this.getLabel = function (option) {\n        return getLabelValue(option);\n      };\n\n      /**\n       * Key down handler\n       */\n      this.keydown = function (event) {\n\n        //Arrows up/down, move selection\n        if (this.isShowingResults && isControlInput(event)) {\n          if (event.keyCode === KeyCodes.UP) {\n            event.preventDefault();\n            moveSelectionUp();\n          } else if (event.keyCode === KeyCodes.DOWN) {\n            event.preventDefault();\n            moveSelectionDown();\n          } else if (event.keyCode === KeyCodes.ESC) {\n            event.preventDefault();\n            this.hideResults();\n          } else if (event.keyCode === KeyCodes.TAB) {\n            //Don't prevent default\n            this.hideResults();\n          } else if (event.keyCode === KeyCodes.ENTER) {\n            event.preventDefault();\n            this.confirmSelection();\n          }\n        }\n\n        //Show options\n        else if (event.keyCode === KeyCodes.ENTER) {\n            event.preventDefault();\n            this.showResults();\n          }\n      };\n\n      /**\n       * Key up handler\n       */\n      this.keyup = function (event) {\n\n        //If control input, skip further handling\n        if (isControlInput(event)) {\n          return;\n        }\n\n        //Get search query\n        var value = (this.searchQuery || '').trim();\n\n        //Call event handlers\n        this.onQuery({ value: value });\n        this.onChange({ value: null, option: null });\n\n        //Validate and mark as dirty\n        this.ngModel.$validate();\n        this.ngModel.$setDirty();\n\n        //Should we search?\n        if (!this.minLength || value.length >= this.minLength) {\n          this.search(value);\n        } else if (this.hasResults()) {\n          this.clearResults();\n          this.clearSelection();\n        }\n      };\n\n      /**************************************************************************\n       * Search\n       ***/\n\n      /**\n       * Search wrapper\n       */\n      this.search = function (value) {\n        var _this = this;\n\n        //Create new debounced search\n        pendingSearch = $timeout(function () {\n          pendingSearch = null;\n          return _this.doSearch(value);\n        }, debounce);\n\n        //Return the promise\n        return pendingSearch;\n      };\n\n      /**\n       * Actual search handler\n       */\n      this.doSearch = function (value) {\n        var _this2 = this;\n\n        //Determine search handler\n        var search = void 0;\n        if (this.options && angular.isArray(this.options)) {\n          search = searchOptions(value);\n        } else if ($attrs.onSearch) {\n          search = this.onSearch({ value: value });\n        } else {\n          $log.warn('No search handler or options specified');\n          return $q.reject();\n        }\n\n        //Toggle flag\n        this.isSearching = true;\n\n        //Return search promise\n        return search\n\n        //Check if we've gotten an old search back\n        .then(function (results) {\n          if (++currentSearch > lastProcessedSearch) {\n            return results;\n          }\n          return $q.reject('old search');\n        })\n\n        //Process the results\n        .then(function (results) {\n          _this2.clearSelection();\n          _this2.results = results;\n          if (results && results.length > 0) {\n            _this2.isShowingResults = true;\n          }\n        })\n\n        //Done searching\n        .finally(function () {\n          return _this2.isSearching = false;\n        });\n      };\n\n      /**************************************************************************\n       * Results navigation & handling\n       ***/\n\n      /**\n       * Check if we have results\n       */\n      this.hasResults = function () {\n        return this.results && this.results.length > 0;\n      };\n\n      /**\n       * Clear results\n       */\n      this.clearResults = function () {\n        this.results = [];\n        this.isShowingResults = false;\n      };\n\n      /**\n       * Show results\n       */\n      this.showResults = function () {\n        if (this.hasResults()) {\n          this.isShowingResults = true;\n        }\n      };\n\n      /**\n       * Select an option\n       */\n      this.select = function (option) {\n\n        //Ignore when disabled\n        if (this.isDisabled) {\n          return;\n        }\n\n        //Hide options\n        this.hideResults();\n\n        //Get the new model and label values\n        var value = getModelValue(option);\n        var label = getLabelValue(option);\n\n        //Set as search query\n        this.searchQuery = label;\n\n        //Call event handlers\n        this.onQuery({ value: label });\n        this.onChange({ value: value, option: option });\n      };\n\n      /**\n       * Hide results\n       */\n      this.hideResults = function () {\n        this.isShowingResults = false;\n      };\n\n      /**\n       * Set the selection index\n       */\n      this.setSelection = function (index) {\n        selectionIndex = index;\n      };\n\n      /**\n       * Check if given index is the selection index\n       */\n      this.isSelection = function (index) {\n        return selectionIndex === index;\n      };\n\n      /**\n       * Clear selection\n       */\n      this.clearSelection = function () {\n        selectionIndex = undefined;\n      };\n\n      /**\n       * Confirm selection\n       */\n      this.confirmSelection = function (index) {\n\n        //If index not given, use current selection index\n        if (typeof index === 'undefined') {\n          index = selectionIndex;\n        }\n\n        //Validate index\n        if (this.results.length === 0 || typeof this.results[index] === 'undefined') {\n          return;\n        }\n\n        //Select result\n        this.select(this.results[index]);\n      };\n    }]\n  });\n})(window, window.angular);","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('FormControls.Component', [\n  'CheckBox.Component',\n  'CheckBoxes.Component',\n  'RadioButtons.Component',\n  'SelectBox.Component',\n  'TypeAhead.Component',\n])\n\n/**\n * Helper service\n */\n.factory('$formControls', function() {\n  return {\n\n    /**\n     * Check if an item value really changed (deep checking with angular.equals)\n     */\n    hasChanged(changes) {\n\n      //Get previous and current value\n      let {previousValue, currentValue} = changes;\n\n      //If unitialized, don't trigger changes\n      if (previousValue === 'UNINITIALIZED_VALUE') {\n        return false;\n      }\n\n      //Check if equals\n      return !angular.equals(previousValue, currentValue);\n    },\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('CheckBox.Component', [])\n\n/**\n * Checkbox component\n */\n.component('checkBox', {\n  template:\n    `<label class=\"check-box\"\n      ng-transclude\n      ng-click=\"$ctrl.toggle()\"\n      ng-class=\"{checked: $ctrl.isChecked(), disabled: $ctrl.isDisabled}\"\n    ></label>`,\n  require: {\n    ngModel: 'ngModel',\n  },\n  transclude: true,\n  bindings: {\n    model: '<ngModel',\n    onChange: '&',\n    isInverse: '<isInverse',\n    isDisabled: '<ngDisabled',\n    isRequired: '<ngRequired',\n  },\n\n  /**\n   * Component controller\n   */\n  controller($element, $formControls) {\n\n    //Get instance\n    let $ctrl = this;\n\n    /**\n     * On init\n     */\n    this.$onInit = function() {\n\n      //Add checkbox wrapper class to parent component\n      $element.addClass('check-box-wrapper');\n\n      //Empty check override in order for ng-required to work properly\n      this.ngModel.$isEmpty = function() {\n        if ($ctrl.isInverse) {\n          return !!$ctrl.model;\n        }\n        return !$ctrl.model;\n      };\n    };\n\n    /**\n     * On change\n     */\n    this.$onChanges = function(changes) {\n\n      //Validate and mark as dirty if needed\n      if (changes.model) {\n        this.ngModel.$validate();\n        if ($formControls.hasChanged(changes.model)) {\n          this.ngModel.$setDirty();\n        }\n      }\n    };\n\n    /**\n     * Toggle\n     */\n    this.toggle = function() {\n\n      //Don't toggle when disabled\n      if (this.isDisabled) {\n        return;\n      }\n\n      //Get boolean value and call on change handler\n      let value = !this.model;\n      this.onChange({value});\n    };\n\n    /**\n     * Check if checked\n     */\n    this.isChecked = function() {\n      return (this.isInverse ? !this.model : !!this.model);\n    };\n  },\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('CheckBoxes.Component', [])\n\n/**\n * Checkboxes component\n */\n.component('checkBoxes', {\n  template:\n    `<div class=\"check-box-group {{$ctrl.classes}}\">\n      <label class=\"check-box\"\n        ng-repeat=\"option in $ctrl.options\"\n        ng-click=\"$ctrl.toggle(option, $index)\"\n        ng-class=\"{checked: $ctrl.isChecked(option, $index), disabled: $ctrl.isDisabled}\"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>`,\n  require: {\n    ngModel: 'ngModel',\n  },\n  bindings: {\n    model: '<ngModel',\n    options: '<',\n    onChange: '&',\n    isDisabled: '<ngDisabled',\n    isRequired: '<ngRequired',\n  },\n\n  /**\n   * Component controller\n   */\n  controller($element, $attrs, $log, $formControls) {\n\n    //Helper vars\n    let $ctrl = this;\n    let labelBy = $attrs.labelBy || null;\n    let trackBy = $attrs.trackBy || null;\n    let asObject = ($attrs.asObject === 'true');\n\n    /**\n     * Helper to get the tracking value of an option\n     */\n    function getTrackingValue(option, index) {\n\n      //Tracking by index?\n      if (trackBy === '$index') {\n        return index;\n      }\n\n      //Non object? Track by its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have tracking property\n      if (!trackBy) {\n        $log.warn('Missing track-by property for check boxes');\n        return null;\n      }\n\n      //Validate property\n      if (typeof option[trackBy] === 'undefined') {\n        $log.warn('Unknown property `' + trackBy + '` for check box tracking');\n        return null;\n      }\n\n      //Return the property\n      return option[trackBy];\n    }\n\n    /**\n     * Get label value of an option\n     */\n    function getLabelValue(option) {\n\n      //Non object? Use its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have label property\n      if (!labelBy) {\n        $log.warn('Missing label-by property for check boxes');\n        return '';\n      }\n\n      //Validate property\n      if (typeof option[labelBy] === 'undefined') {\n        $log.warn('Unknown property `' + labelBy + '` for check box label');\n        return '';\n      }\n\n      //Return the property\n      return option[labelBy];\n    }\n\n    /**\n     * Check if a certain option is checked\n     */\n    function isChecked(model, option, index) {\n\n      //Nothing selected?\n      if (!angular.isArray(model) || model.length === 0) {\n        return false;\n      }\n\n      //Get option value\n      let optionValue = getTrackingValue(option, index);\n\n      //See if present in model values\n      let find = model.find(model => {\n        let modelValue = getTrackingValue(model, model);\n        return (modelValue === optionValue);\n      });\n      return (typeof find !== 'undefined');\n    }\n\n    /**\n     * Initialization\n     */\n    this.$onInit = function() {\n\n      //Check configuration\n      if (asObject && trackBy === '$index') {\n        $log.warn('Cannot track check boxes by index if model is an object');\n        asObject = false;\n      }\n\n      //Propagate classes\n      this.classes = $element[0].className;\n      $element[0].className = '';\n\n      //Empty check override in order for ng-required to work properly\n      this.ngModel.$isEmpty = function() {\n\n        //Needed here to prevent $validate from setting the model to undefined\n        //NOTE: first approach for Angular < 1.6.0\n        if (typeof $ctrl.ngModel.$$setOptions === 'function') {\n          $ctrl.ngModel.$$setOptions({\n            allowInvalid: true,\n          });\n        }\n        else {\n          $ctrl.ngModel.$options = $ctrl.ngModel.$options.createChild({\n            allowInvalid: true,\n          });\n        }\n\n        //Return check now\n        return (!angular.isArray($ctrl.model) || $ctrl.model.length === 0);\n      };\n    };\n\n    /**\n     * On change\n     */\n    this.$onChanges = function(changes) {\n\n      //Must have array as options\n      if (!angular.isArray(this.options)) {\n        this.options = [];\n      }\n\n      //Validate and mark as dirty if needed\n      if (changes.model) {\n        this.ngModel.$validate();\n        if ($formControls.hasChanged(changes.model)) {\n          this.ngModel.$setDirty();\n        }\n      }\n    };\n\n    /**\n     * Get label value of an option\n     */\n    this.getLabel = function(option) {\n      return getLabelValue(option);\n    };\n\n    /**\n     * Check if given option is checked\n     */\n    this.isChecked = function(option, index) {\n      return isChecked(this.model, option, index);\n    };\n\n    /**\n     * Toggle an option\n     */\n    this.toggle = function(option, index) {\n\n      //Ignore when disabled\n      if (this.isDisabled) {\n        return;\n      }\n\n      //Initialize value of our model array\n      let value = [];\n      if (angular.isArray(this.model)) {\n        value = this.model.map(item => item);\n      }\n\n      //Check if currently checked (use source model) and get the item value\n      let checked = isChecked(value, option, index);\n      let optionValue = getTrackingValue(option, index);\n\n      //If checked, remove from target model, otherwise add\n      if (checked) {\n        let i = value.findIndex(model => {\n          let modelValue = getTrackingValue(model, model);\n          return (modelValue === optionValue);\n        });\n        value.splice(i, 1);\n      }\n      else {\n        value.push(asObject ? option : optionValue);\n      }\n\n      //Call on change handler\n      this.onChange({value});\n    };\n  },\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('RadioButtons.Component', [])\n\n/**\n * Radio buttons component\n */\n.component('radioButtons', {\n  template:\n    `<div class=\"radio-button-group {{$ctrl.classes}}\">\n      <label class=\"radio-button\"\n        ng-if=\"$ctrl.isNullable\"\n        ng-click=\"$ctrl.select(null)\"\n        ng-class=\"{checked: $ctrl.isSelected(null), disabled: $ctrl.isDisabled}\"\n      >{{$ctrl.nullLabel}}</label>\n      <label class=\"radio-button\"\n        ng-repeat=\"option in $ctrl.options\"\n        ng-click=\"$ctrl.select(option, $index)\"\n        ng-class=\"{checked: $ctrl.isSelected(option, $index), disabled: $ctrl.isDisabled}\"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>`,\n  require: {\n    ngModel: 'ngModel',\n  },\n  bindings: {\n    model: '<ngModel',\n    options: '<',\n    onChange: '&',\n    isNullable: '<',\n    nullValue: '<',\n    nullLabel: '<',\n    isDisabled: '<ngDisabled',\n    isRequired: '<ngRequired',\n  },\n\n  /**\n   * Component controller\n   */\n  controller($element, $attrs, $log, $formControls) {\n\n    //Helper vars\n    let $ctrl = this;\n    let labelBy = $attrs.labelBy || null;\n    let trackBy = $attrs.trackBy || null;\n    let asObject = ($attrs.asObject === 'true');\n\n    /**\n     * Helper to get the tracking value of an option\n     */\n    function getTrackingValue(option, index) {\n\n      //Null value?\n      if (option === null) {\n        return $ctrl.nullValue;\n      }\n\n      //Tracking by index?\n      if (trackBy === '$index') {\n        return index;\n      }\n\n      //Non object? Track by its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have tracking property\n      if (!trackBy) {\n        $log.warn('Missing track-by property for radio buttons');\n        return null;\n      }\n\n      //Validate property\n      if (typeof option[trackBy] === 'undefined') {\n        $log.warn('Unknown property `' + trackBy + '` for radio tracking');\n        return null;\n      }\n\n      //Return the property\n      return option[trackBy];\n    }\n\n    /**\n     * Get the model value\n     */\n    function getModelValue(option, index) {\n\n      //If nullable and null option given, return null value\n      if ($ctrl.isNullable && option === null) {\n        return $ctrl.nullValue;\n      }\n\n      //If returning as object, return the selected option\n      if (asObject) {\n        return option;\n      }\n\n      //Otherwise, return the tracking value of the given option\n      return getTrackingValue(option, index);\n    }\n\n    /**\n     * Get label value of an option\n     */\n    function getLabelValue(option) {\n\n      //Null value?\n      if (option === null) {\n        return $ctrl.nullLabel;\n      }\n\n      //Non object? Use its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have label property\n      if (!labelBy) {\n        $log.warn('Missing label-by property for selectbox');\n        return '';\n      }\n\n      //Validate property\n      if (typeof option[labelBy] === 'undefined') {\n        $log.warn('Unknown property `' + labelBy + '` for selectbox label');\n        return '';\n      }\n\n      //Return the property\n      return option[labelBy];\n    }\n\n    /**\n     * Check if a certain option is selected\n     */\n    function isSelected(option, index) {\n\n      //Nullable and null value selected?\n      if (\n        $ctrl.isNullable &&\n        $ctrl.model === $ctrl.nullValue &&\n        option === null) {\n        return true;\n      }\n\n      //Nothing selected?\n      if ($ctrl.model === null) {\n        return false;\n      }\n\n      //Get the model and option values\n      let modelValue = getTrackingValue($ctrl.model, $ctrl.model);\n      let optionValue = getTrackingValue(option, index);\n\n      //Compare the two\n      return (modelValue === optionValue);\n    }\n\n    /**\n     * Initialization\n     */\n    this.$onInit = function() {\n\n      //Check configuration\n      if (asObject && trackBy === '$index') {\n        $log.warn('Cannot track radio buttons by index if model is an object');\n        asObject = false;\n      }\n\n      //Propagate classes\n      this.classes = $element[0].className;\n      $element[0].className = '';\n\n      //Empty check override in order for ng-required to work properly\n      this.ngModel.$isEmpty = function() {\n        if ($ctrl.isNullable) {\n          return ($ctrl.model === $ctrl.nullValue);\n        }\n        return ($ctrl.model === null || typeof $ctrl.model === 'undefined');\n      };\n    };\n\n    /**\n     * On change\n     */\n    this.$onChanges = function(changes) {\n\n      //Must have array as options\n      if (!angular.isArray(this.options)) {\n        this.options = [];\n      }\n\n      //Set default null value/label if not set\n      if (typeof this.nullValue === 'undefined') {\n        this.nullValue = null;\n      }\n      if (typeof this.nullLabel === 'undefined') {\n        this.nullLabel = 'None';\n      }\n\n      //Set model to null value if not defined or null\n      if (this.isNullable) {\n        if (this.model === null || typeof this.model === 'undefined') {\n          this.model = this.nullValue;\n        }\n      }\n\n      //Validate and mark as dirty if needed\n      if (changes.model) {\n        this.ngModel.$validate();\n        if ($formControls.hasChanged(changes.model)) {\n          this.ngModel.$setDirty();\n        }\n      }\n    };\n\n    /**\n     * Get label value of an option\n     */\n    this.getLabel = function(option) {\n      return getLabelValue(option);\n    };\n\n    /**\n     * Check if given option is selected\n     */\n    this.isSelected = function(option, index) {\n      return isSelected(option, index);\n    };\n\n    /**\n     * Select an option\n     */\n    this.select = function(option, index) {\n\n      //Ignore when disabled\n      if (this.isDisabled) {\n        return;\n      }\n\n      //Get the new model value and call on change handler\n      let value = getModelValue(option, index);\n      this.onChange({value, option});\n    };\n  },\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n/**\n * Module definition and dependencies\n */\nangular.module('SelectBox.Component', [])\n\n/**\n * Selectbox component\n */\n.component('selectBox', {\n  template:\n    `<div class=\"select-box {{$ctrl.classes}}\">\n      <div class=\"form-control-wrapper clickable\" ng-click=\"$ctrl.toggleOptions()\">\n        <span class=\"form-control-spinner\" ng-class=\"{'show-spinner': $ctrl.hasSpinner}\">\n          <span class=\"caret\"\n            ng-click=\"$ctrl.toggleOptions(); $event.stopPropagation();\"\n            ng-class=\"{disabled: $ctrl.isDisabled}\"\n            ng-if=\"!$ctrl.hasSpinner\"\n          ></span>\n          <input readonly class=\"form-control\" type=\"text\"\n            ng-value=\"$ctrl.getSelectedLabel()\"\n            ng-keydown=\"$ctrl.keydown($event)\"\n            ng-class=\"{disabled: ($ctrl.isDisabled || $ctrl.hasSpinner)}\">\n          <spinner ng-if=\"$ctrl.hasSpinner\"></spinner>\n        </span>\n      </div>\n      <ul class=\"select-box-options\" ng-show=\"$ctrl.isShowingOptions\">\n        <li\n          ng-if=\"$ctrl.isNullable || !$ctrl.hasOptions()\"\n          ng-class=\"{selected: $ctrl.isSelection(-1)}\"\n          ng-mouseover=\"$ctrl.setSelection(-1)\"\n          ng-click=\"$ctrl.confirmSelection(-1)\"\n        >{{$ctrl.nullLabel}}</li>\n        <li\n          ng-transclude\n          ng-repeat=\"option in $ctrl.options\"\n          ng-class=\"{selected: $ctrl.isSelection($index)}\"\n          ng-mouseover=\"$ctrl.setSelection($index)\"\n          ng-click=\"$ctrl.confirmSelection($index)\"\n        >{{$ctrl.getLabel(option)}}</li>\n      </ul>\n    </div>`,\n  transclude: true,\n  require: {\n    ngModel: 'ngModel',\n  },\n  bindings: {\n    model: '<ngModel',\n    options: '<',\n    onChange: '&',\n    isNullable: '<',\n    nullValue: '<',\n    nullLabel: '<',\n    isDisabled: '<ngDisabled',\n    isRequired: '<ngRequired',\n    hasSpinner: '<hasSpinner',\n  },\n\n  /**\n   * Component controller\n   */\n  controller($element, $attrs, $log, $formControls, $scope, $document) {\n\n    //Helper vars\n    const $ctrl = this;\n    let selectionIndex, $input, $container;\n    let labelBy = $attrs.labelBy || null;\n    let trackBy = $attrs.trackBy || null;\n    let asObject = ($attrs.asObject === 'true');\n    let phrase = '';\n\n    //Keycodes\n    const KeyCodes = {\n      ENTER: 13,\n      ESC: 27,\n      SPACE: 32,\n      UP: 38,\n      DOWN: 40,\n    };\n\n    /**\n     * Debounce helper\n     */\n    function debounce(func, delay) {\n\n      //Timeout placeholder\n      let timeout;\n\n      //Create wrapper function\n      const wrapper = function() {\n\n        //Clear any existing timeout\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n\n        //Create new timeout\n        timeout = setTimeout(() => func(), delay);\n      };\n\n      //Return wrapper function\n      return wrapper;\n    }\n\n    /**\n     * Function to clear the phrase (debounced after 1.5 seconds)\n     */\n    const clearPhrase = debounce(() => {\n      phrase = '';\n    }, 1000);\n\n    /**\n     * Check if input was text\n     */\n    function isTextInput(event) {\n      if (event.keyCode >= 48 && event.keyCode <= 57) {\n        return true;\n      }\n      if (event.keyCode >= 65 && event.keyCode <= 90) {\n        return true;\n      }\n      if (event.keyCode === 32) {\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * Click handler for document\n     */\n    function documentClickHandler(event) {\n      if (!$input[0].contains(event.target) && $ctrl.isShowingOptions) {\n        $scope.$apply($ctrl.hideOptions.bind($ctrl));\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n\n    /**\n     * Ensure the selected option is in view\n     */\n    function ensureSelectionInView() {\n\n      //Check index\n      if (!$ctrl.isNullable && selectionIndex < 0) {\n        return;\n      }\n\n      //Find options\n      const $options = $container.children();\n\n      //Get option now, taking into account the additional nullable element\n      const option = $options[selectionIndex + ($ctrl.isNullable ? 1 : 0)];\n      if (!option) {\n        return;\n      }\n\n      //Determine container and element top and bottom\n      const cTop = $container[0].scrollTop;\n      const cBottom = cTop + $container[0].clientHeight;\n      const eTop = option.offsetTop;\n      const eBottom = eTop + option.clientHeight;\n\n      //Check if out of view\n      if (eTop < cTop) {\n        $container[0].scrollTop -= (cTop - eTop);\n      }\n      else if (eBottom > cBottom) {\n        $container[0].scrollTop += (eBottom - cBottom);\n      }\n    }\n\n    /**\n     * Move selection up\n     */\n    function moveSelectionUp() {\n      let oldIndex = selectionIndex;\n      if (typeof selectionIndex === 'undefined') {\n        if ($ctrl.isNullable) {\n          selectionIndex = -1;\n        }\n        else if ($ctrl.options.length > 0) {\n          selectionIndex = $ctrl.options.length - 1;\n        }\n      }\n      else if (selectionIndex > ($ctrl.isNullable ? -1 : 0)) {\n        selectionIndex--;\n      }\n      if (oldIndex !== selectionIndex) {\n        ensureSelectionInView();\n      }\n    }\n\n    /**\n     * Move selection down\n     */\n    function moveSelectionDown() {\n      let oldIndex = selectionIndex;\n      if (typeof selectionIndex === 'undefined') {\n        if ($ctrl.isNullable) {\n          selectionIndex = -1;\n        }\n        else if ($ctrl.options.length > 0) {\n          selectionIndex = 0;\n        }\n      }\n      else if (selectionIndex < ($ctrl.options.length - 1)) {\n        selectionIndex++;\n      }\n      if (oldIndex !== selectionIndex) {\n        ensureSelectionInView();\n      }\n    }\n\n    /**\n     * Helper to get the tracking value of an option\n     */\n    function getTrackingValue(option, index) {\n\n      //Null value?\n      if (option === null) {\n        return $ctrl.nullValue;\n      }\n\n      //Tracking by index?\n      if (trackBy === '$index') {\n        return index;\n      }\n\n      //Non object? Track by its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have tracking property\n      if (!trackBy) {\n        $log.warn('Missing track-by property for select box');\n        return $ctrl.nullValue;\n      }\n\n      //Validate property\n      if (typeof option[trackBy] === 'undefined') {\n        $log.warn('Unknown property `' + trackBy + '` for select box tracking');\n        return $ctrl.nullValue;\n      }\n\n      //Return the property\n      return option[trackBy];\n    }\n\n    /**\n     * Get the model value\n     */\n    function getModelValue(option, index) {\n\n      //If nullable and null option given, return null value\n      if ($ctrl.isNullable && option === null) {\n        return $ctrl.nullValue;\n      }\n\n      //If returning as object, return the selected option\n      if (asObject) {\n        return option;\n      }\n\n      //Otherwise, return the tracking value of the given option\n      return getTrackingValue(option, index);\n    }\n\n    /**\n     * Get label value of an option\n     */\n    function getLabelValue(option) {\n\n      //Null value?\n      if (option === null || typeof option === 'undefined') {\n        return $ctrl.nullLabel;\n      }\n\n      //Non object? Use its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have label property\n      if (!labelBy) {\n        $log.warn('Missing label-by property for select box');\n        return '';\n      }\n\n      //Validate property\n      if (typeof option[labelBy] === 'undefined') {\n        $log.warn('Unknown property `' + labelBy + '` for select box label');\n        return '';\n      }\n\n      //Return the property\n      return option[labelBy];\n    }\n\n    /**\n     * Find the selected option based on the model value\n     */\n    function findOption(model, options) {\n\n      //Nothing selected or null value selected?\n      if (typeof model === 'undefined' || model === $ctrl.nullValue) {\n        return null;\n      }\n\n      //Tracking by index?\n      if (trackBy === '$index') {\n        if (typeof options[model] !== 'undefined') {\n          return options[model];\n        }\n        return null;\n      }\n\n      //Get the model value\n      let modelValue = getTrackingValue(model, model);\n\n      //Find matching option\n      return options\n        .find((option, index) => {\n          let optionValue = getTrackingValue(option, index);\n          return (modelValue === optionValue);\n        });\n    }\n\n    /**\n     * Initialization\n     */\n    this.$onInit = function() {\n\n      //Check configuration\n      if (asObject && trackBy === '$index') {\n        $log.warn('Cannot track select box by index if model is an object');\n        asObject = false;\n      }\n\n      //Initialize flags\n      this.isShowingOptions = false;\n\n      //Propagate classes\n      this.classes = $element[0].className;\n      $element[0].className = '';\n\n      //Find some elements\n      $input = $element.find('input');\n      $container = $input.parent().parent().next();\n\n      //Apply document click handler\n      //NOTE: applied on body, so that it can prevent global $document handlers\n      $document.find('body').on('click', documentClickHandler);\n\n      //Empty check override in order for ng-required to work properly\n      this.ngModel.$isEmpty = function() {\n        if ($ctrl.isNullable) {\n          return ($ctrl.model === $ctrl.nullValue);\n        }\n        return ($ctrl.model === null || typeof $ctrl.model === 'undefined');\n      };\n    };\n\n    /**\n     * Destroy\n     */\n    this.$onDestroy = function() {\n      $document.find('body').off('click', documentClickHandler);\n    };\n\n    /**\n     * On change\n     */\n    this.$onChanges = function(changes) {\n\n      //Must have array as options\n      if (!angular.isArray(this.options)) {\n        this.options = [];\n      }\n\n      //Set default null value/label if not set\n      if (typeof this.nullValue === 'undefined') {\n        this.nullValue = null;\n      }\n      if (typeof this.nullLabel === 'undefined') {\n        this.nullLabel = '...';\n      }\n\n      //Set model to null value if not defined or null\n      if (this.isNullable) {\n        if (this.model === null || typeof this.model === 'undefined') {\n          this.model = this.nullValue;\n        }\n      }\n\n      //If disabled, hide options\n      if (this.isDisabled) {\n        this.isShowingOptions = false;\n      }\n\n      //Determine selection index\n      let option = findOption(this.model, this.options);\n      selectionIndex = this.options.indexOf(option);\n\n      //Validate and mark as dirty if needed\n      if (changes.model) {\n        this.ngModel.$validate();\n        if ($formControls.hasChanged(changes.model)) {\n          this.ngModel.$setDirty();\n        }\n      }\n    };\n\n    /**\n     * Keydown handler for input element\n     */\n    this.keydown = function(event) {\n\n      //Move selection up or down\n      if (event.keyCode === KeyCodes.UP) {\n        event.preventDefault();\n        if (this.isShowingOptions) {\n          moveSelectionUp();\n        }\n        else {\n          this.showOptions();\n        }\n      }\n      else if (event.keyCode === KeyCodes.DOWN) {\n        event.preventDefault();\n        if (this.isShowingOptions) {\n          moveSelectionDown();\n        }\n        else {\n          this.showOptions();\n        }\n      }\n\n      //Confirm selection\n      else if (event.keyCode === KeyCodes.ENTER && this.isShowingOptions) {\n        event.preventDefault();\n        this.confirmSelection();\n      }\n\n      //Hide options\n      else if (event.keyCode === KeyCodes.ESC && this.isShowingOptions) {\n        event.preventDefault();\n        this.hideOptions();\n      }\n\n      //Show options\n      else if (event.keyCode === KeyCodes.ENTER && !this.isShowingOptions) {\n        event.preventDefault();\n        this.showOptions();\n      }\n\n      //Text input\n      else if (isTextInput(event)) {\n        const char = String.fromCharCode(event.keyCode);\n        this.selectByInput(char);\n      }\n    };\n\n    /**\n     * Get label value of selected option\n     */\n    this.getSelectedLabel = function() {\n      let option = findOption(this.model, this.options);\n      return getLabelValue(option);\n    };\n\n    /**\n     * Get label value of an option\n     */\n    this.getLabel = function(option) {\n      return getLabelValue(option);\n    };\n\n    /**\n     * Show options\n     */\n    this.showOptions = function() {\n      if (!this.isDisabled && !this.hasSpinner) {\n        this.isShowingOptions = true;\n      }\n    };\n\n    /**\n     * Hide options\n     */\n    this.hideOptions = function() {\n      this.isShowingOptions = false;\n    };\n\n    /**\n     * Toggle options\n     */\n    this.toggleOptions = function() {\n      if (this.isShowingOptions) {\n        this.hideOptions();\n      }\n      else {\n        this.showOptions();\n      }\n    };\n\n    /**\n     * Has options check\n     */\n    this.hasOptions = function() {\n      return (this.options.length > 0);\n    };\n\n    /**\n     * Select by input character(s)\n     */\n    this.selectByInput = function(char) {\n\n      //Lowercase all the things\n      char = char.toLowerCase();\n\n      //Add to phrase\n      phrase += char;\n\n      //Create regex\n      const regex = new RegExp('^' + phrase, 'i');\n\n      //Find matching option\n      const option = this.options.find(option => {\n        const label = getLabelValue(option);\n        return label.match(regex);\n      });\n\n      //Match found?\n      if (option) {\n        const index = this.options.findIndex(o => o === option);\n        this.select(option, index, true);\n      }\n\n      //Clear phrase (debounced)\n      clearPhrase();\n    };\n\n    /**\n     * Select an option\n     */\n    this.select = function(option, index, leaveOpen) {\n\n      //Ignore when disabled\n      if (this.isDisabled) {\n        return;\n      }\n\n      //Hide options\n      if (!leaveOpen) {\n        this.hideOptions();\n      }\n      else {\n        ensureSelectionInView();\n      }\n\n      //Get the new model value and call on change handler\n      let value = getModelValue(option, index);\n      this.onChange({value, option});\n    };\n\n    /**\n     * Set the selection index\n     */\n    this.setSelection = function(index) {\n      selectionIndex = index;\n    };\n\n    /**\n     * Check if given index is the selection index\n     */\n    this.isSelection = function(index) {\n      return (selectionIndex === index);\n    };\n\n    /**\n     * Confirm selection\n     */\n    this.confirmSelection = function(index) {\n\n      //If index not given, use current selection index\n      if (typeof index === 'undefined') {\n        index = selectionIndex;\n      }\n\n      //Initialize option\n      let option;\n\n      //Nullable and -1 index given?\n      if (this.isNullable && index === -1) {\n        option = null;\n      }\n\n      //Otherwise, take from given options\n      else {\n\n        //Validate index\n        if (\n          !this.hasOptions() ||\n          typeof index === 'undefined' ||\n          typeof this.options[index] === 'undefined'\n        ) {\n          return;\n        }\n\n        //Get option\n        option = this.options[index];\n      }\n\n      //Select option now\n      this.select(option, index);\n    };\n  },\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n/**\n * Module definition and dependencies\n */\nangular.module('TypeAhead.Component', [])\n\n/**\n * Type ahead component\n */\n.component('typeAhead', {\n  template:\n    `<div class=\"type-ahead\">\n      <span class=\"form-control-spinner\"\n        ng-class=\"{'show-spinner': $ctrl.isSearching}\">\n        <input class=\"form-control\" type=\"text\"\n          placeholder=\"{{$ctrl.placeholder}}\"\n          ng-keydown=\"$ctrl.keydown($event)\"\n          ng-keyup=\"$ctrl.keyup($event)\"\n          ng-disabled=\"$ctrl.isDisabled\"\n          ng-model=\"$ctrl.searchQuery\">\n        <spinner></spinner>\n      </span>\n      <ul class=\"type-ahead-results\" ng-show=\"$ctrl.isShowingResults\">\n        <li\n          ng-repeat=\"item in $ctrl.results\"\n          ng-class=\"{selected: $ctrl.isSelection($index)}\"\n          ng-mouseover=\"$ctrl.setSelection($index)\"\n          ng-click=\"$ctrl.confirmSelection($index)\"\n          ng-transclude>\n          <span ng-bind-html=\"$ctrl.getLabel(item) |\n            markmatches:$ctrl.searchQuery:'strong'\"></span>\n        </li>\n      </ul>\n    </div>`,\n  transclude: true,\n  require: {\n    ngModel: 'ngModel',\n  },\n  bindings: {\n    model: '<ngModel',\n    options: '<',\n    placeholder: '@',\n    onSearch: '&',\n    onChange: '&',\n    onQuery: '&',\n    isDisabled: '<ngDisabled',\n    isRequired: '<ngRequired',\n    labelBy: '@',\n    trackBy: '@',\n    asObject: '@',\n    minLength: '@',\n    allowNew: '@',\n  },\n\n  /**\n   * Component controller\n   */\n  controller(\n    $element, $scope, $formControls, $attrs, $log, $q, $timeout, $document\n  ) {\n\n    //Helper vars\n    let $input, $container, $options;\n    let $ctrl = this;\n    let selectionIndex = -1;\n    let debounce = 100;\n    let labelBy = $attrs.labelBy || null;\n    let trackBy = $attrs.trackBy || null;\n    let asObject = ($attrs.asObject === 'true');\n    let allowNew = ($attrs.allowNew === 'true');\n\n    //Keep track of searches, prevent older searches overwriting newer ones\n    let currentSearch = 0;\n    let lastProcessedSearch = 0;\n    let pendingSearch = null;\n\n    //Keycodes\n    const KeyCodes = {\n      ENTER: 13,\n      ESC: 27,\n      SPACE: 32,\n      TAB: 9,\n      UP: 38,\n      DOWN: 40,\n    };\n\n    /**\n     * Check if input was control\n     */\n    function isControlInput(event) {\n      let keys = [\n        KeyCodes.UP, KeyCodes.DOWN, KeyCodes.ENTER, KeyCodes.ESC, KeyCodes.TAB,\n      ];\n      return (keys.indexOf(event.keyCode) > -1);\n    }\n\n    /**\n     * Click handler for document\n     */\n    function documentClickHandler(event) {\n      if (!$input[0].contains(event.target) && $ctrl.isShowingResults) {\n        $scope.$apply($ctrl.hideResults.bind($ctrl));\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n\n    /**\n     * Ensure the selected option is in view\n     */\n    function ensureSelectionInView() {\n\n      //Check index\n      if (!$ctrl.isNullable && selectionIndex < 0) {\n        return;\n      }\n\n      //Get option now, taking into account the additional nullable element\n      let option = $options[selectionIndex + ($ctrl.isNullable ? 1 : 0)];\n      if (!option) {\n        return;\n      }\n\n      //Determine container and element top and bottom\n      let cTop = $container[0].scrollTop;\n      let cBottom = cTop + $container[0].clientHeight;\n      let eTop = option.offsetTop;\n      let eBottom = eTop + option.clientHeight;\n\n      //Check if out of view\n      if (eTop < cTop) {\n        $container[0].scrollTop -= (cTop - eTop);\n      }\n      else if (eBottom > cBottom) {\n        $container[0].scrollTop += (eBottom - cBottom);\n      }\n    }\n\n    /**\n     * Move selection up\n     */\n    function moveSelectionUp() {\n      let oldIndex = selectionIndex;\n      if (typeof selectionIndex === 'undefined') {\n        if ($ctrl.isNullable) {\n          selectionIndex = -1;\n        }\n        else if ($ctrl.options.length > 0) {\n          selectionIndex = $ctrl.options.length - 1;\n        }\n      }\n      else if (selectionIndex > ($ctrl.isNullable ? -1 : 0)) {\n        selectionIndex--;\n      }\n      if (oldIndex !== selectionIndex) {\n        ensureSelectionInView();\n      }\n    }\n\n    /**\n     * Move selection down\n     */\n    function moveSelectionDown() {\n      let oldIndex = selectionIndex;\n      if (typeof selectionIndex === 'undefined') {\n        if ($ctrl.isNullable) {\n          selectionIndex = -1;\n        }\n        else if ($ctrl.options.length > 0) {\n          selectionIndex = 0;\n        }\n      }\n      else if (selectionIndex < ($ctrl.options.length - 1)) {\n        selectionIndex++;\n      }\n      if (oldIndex !== selectionIndex) {\n        ensureSelectionInView();\n      }\n    }\n\n    /**\n     * Helper to get the tracking value of an option\n     */\n    function getTrackingValue(option) {\n\n      //Non object? Track by its value\n      if (option === null || !angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have tracking property\n      if (!trackBy) {\n        $log.warn('Missing track-by property for type ahead');\n        return null;\n      }\n\n      //Validate property\n      if (typeof option[trackBy] === 'undefined') {\n        $log.warn('Unknown property `' + trackBy + '` for type ahead tracking');\n        return null;\n      }\n\n      //Return the property\n      return option[trackBy];\n    }\n\n    /**\n     * Get the model value\n     */\n    function getModelValue(option) {\n\n      //If returning as object, return the selected option\n      if (asObject) {\n        return option;\n      }\n\n      //Otherwise, return the tracking value of the given option\n      return getTrackingValue(option);\n    }\n\n    /**\n     * Get label value of an option\n     */\n    function getLabelValue(option) {\n\n      //Null value?\n      if (option === null || typeof option === 'undefined') {\n        return '';\n      }\n\n      //Non object? Use its value\n      if (!angular.isObject(option)) {\n        return option;\n      }\n\n      //Must have label property\n      if (!labelBy) {\n        $log.warn('Missing label-by property for type ahead');\n        return '';\n      }\n\n      //Validate property\n      if (typeof option[labelBy] === 'undefined') {\n        $log.warn('Unknown property `' + labelBy + '` for type ahead label');\n        return '';\n      }\n\n      //Return the property\n      return option[labelBy];\n    }\n\n    /**\n     * Find the selected option based on the model value\n     */\n    function findOption(model, options) {\n\n      //Nothing selected or null value selected?\n      if (typeof model === 'undefined' || model === $ctrl.nullValue) {\n        return null;\n      }\n\n      //Tracking by index?\n      if (trackBy === '$index') {\n        if (typeof options[model] !== 'undefined') {\n          return options[model];\n        }\n        return null;\n      }\n\n      //Get the model value\n      let modelValue = getTrackingValue(model, model);\n\n      //Find matching option\n      return options\n        .find((option, index) => {\n          let optionValue = getTrackingValue(option, index);\n          return (modelValue === optionValue);\n        });\n    }\n\n    /**\n     * Do a simple search on object property\n     */\n    function searchOptions(value) {\n      if (!value) {\n        return $q.resolve([]);\n      }\n      let regex = new RegExp('(?:^|\\\\b)(' + value + ')', 'i');\n      let items = $ctrl.options\n        .filter(option => {\n          let label = getLabelValue(option);\n          return regex.test(label);\n        });\n      return $q.resolve(items);\n    }\n\n    /**\n     * Init\n     */\n    this.$onInit = function() {\n\n      //Find some elements\n      $input = $element.find('input');\n      $container = $input.parent().next();\n      $options = $container.find('li');\n\n      //Propagate focus\n      $element.attr('tabindex', -1);\n      $element.on('focus', () => {\n        $input[0].focus();\n      });\n\n      //Apply document click handler\n      //NOTE: applied on body, so that it can prevent global $document handlers\n      $document.find('body').on('click', documentClickHandler);\n\n      //Initialize results and flags\n      this.results = [];\n      this.isSearching = false;\n      this.isShowingResults = false;\n\n      //Empty check override in order for ng-required to work properly\n      this.ngModel.$isEmpty = function() {\n        if ($ctrl.model === null || typeof $ctrl.model === 'undefined') {\n          if (allowNew && $ctrl.searchQuery) {\n            return false;\n          }\n          return true;\n        }\n        return false;\n      };\n    };\n\n    /**\n     * Destroy\n     */\n    this.$onDestroy = function() {\n      $document.find('body').off('click', documentClickHandler);\n    };\n\n    /**\n     * Change handler\n     */\n    this.$onChanges = function(changes) {\n\n      //Validate and mark as dirty if needed\n      if (changes.model) {\n\n        //Only update search query when we have a model\n        //This is to prevent the input from being cleared when we go and edit\n        if (this.model) {\n          let option;\n          if (angular.isArray(this.options)) {\n            option = findOption(this.model, this.options);\n          }\n          else if (angular.isObject(this.model)) {\n            option = this.model;\n          }\n          if (option) {\n            this.searchQuery = getLabelValue(option);\n          }\n        }\n\n        //Validate model\n        this.ngModel.$validate();\n        if ($formControls.hasChanged(changes.model)) {\n          this.ngModel.$setDirty();\n        }\n      }\n    };\n\n    /**\n     * Get label value of an option\n     */\n    this.getLabel = function(option) {\n      return getLabelValue(option);\n    };\n\n    /**\n     * Key down handler\n     */\n    this.keydown = function(event) {\n\n      //Arrows up/down, move selection\n      if (this.isShowingResults && isControlInput(event)) {\n        if (event.keyCode === KeyCodes.UP) {\n          event.preventDefault();\n          moveSelectionUp();\n        }\n        else if (event.keyCode === KeyCodes.DOWN) {\n          event.preventDefault();\n          moveSelectionDown();\n        }\n        else if (event.keyCode === KeyCodes.ESC) {\n          event.preventDefault();\n          this.hideResults();\n        }\n        else if (event.keyCode === KeyCodes.TAB) {\n          //Don't prevent default\n          this.hideResults();\n        }\n        else if (event.keyCode === KeyCodes.ENTER) {\n          event.preventDefault();\n          this.confirmSelection();\n        }\n      }\n\n      //Show options\n      else if (event.keyCode === KeyCodes.ENTER) {\n        event.preventDefault();\n        this.showResults();\n      }\n    };\n\n    /**\n     * Key up handler\n     */\n    this.keyup = function(event) {\n\n      //If control input, skip further handling\n      if (isControlInput(event)) {\n        return;\n      }\n\n      //Get search query\n      let value = (this.searchQuery || '').trim();\n\n      //Call event handlers\n      this.onQuery({value});\n      this.onChange({value: null, option: null});\n\n      //Validate and mark as dirty\n      this.ngModel.$validate();\n      this.ngModel.$setDirty();\n\n      //Should we search?\n      if (!this.minLength || value.length >= this.minLength) {\n        this.search(value);\n      }\n      else if (this.hasResults()) {\n        this.clearResults();\n        this.clearSelection();\n      }\n    };\n\n    /**************************************************************************\n     * Search\n     ***/\n\n    /**\n     * Search wrapper\n     */\n    this.search = function(value) {\n\n      //Create new debounced search\n      pendingSearch = $timeout(() => {\n        pendingSearch = null;\n        return this.doSearch(value);\n      }, debounce);\n\n      //Return the promise\n      return pendingSearch;\n    };\n\n    /**\n     * Actual search handler\n     */\n    this.doSearch = function(value) {\n\n      //Determine search handler\n      let search;\n      if (this.options && angular.isArray(this.options)) {\n        search = searchOptions(value);\n      }\n      else if ($attrs.onSearch) {\n        search = this.onSearch({value});\n      }\n      else {\n        $log.warn('No search handler or options specified');\n        return $q.reject();\n      }\n\n      //Toggle flag\n      this.isSearching = true;\n\n      //Return search promise\n      return search\n\n        //Check if we've gotten an old search back\n        .then(results => {\n          if (++currentSearch > lastProcessedSearch) {\n            return results;\n          }\n          return $q.reject('old search');\n        })\n\n        //Process the results\n        .then(results => {\n          this.clearSelection();\n          this.results = results;\n          if (results && results.length > 0) {\n            this.isShowingResults = true;\n          }\n        })\n\n        //Done searching\n        .finally(() => this.isSearching = false);\n    };\n\n    /**************************************************************************\n     * Results navigation & handling\n     ***/\n\n    /**\n     * Check if we have results\n     */\n    this.hasResults = function() {\n      return (this.results && this.results.length > 0);\n    };\n\n    /**\n     * Clear results\n     */\n    this.clearResults = function() {\n      this.results = [];\n      this.isShowingResults = false;\n    };\n\n    /**\n     * Show results\n     */\n    this.showResults = function() {\n      if (this.hasResults()) {\n        this.isShowingResults = true;\n      }\n    };\n\n    /**\n     * Select an option\n     */\n    this.select = function(option) {\n\n      //Ignore when disabled\n      if (this.isDisabled) {\n        return;\n      }\n\n      //Hide options\n      this.hideResults();\n\n      //Get the new model and label values\n      let value = getModelValue(option);\n      let label = getLabelValue(option);\n\n      //Set as search query\n      this.searchQuery = label;\n\n      //Call event handlers\n      this.onQuery({value: label});\n      this.onChange({value, option});\n    };\n\n    /**\n     * Hide results\n     */\n    this.hideResults = function() {\n      this.isShowingResults = false;\n    };\n\n    /**\n     * Set the selection index\n     */\n    this.setSelection = function(index) {\n      selectionIndex = index;\n    };\n\n    /**\n     * Check if given index is the selection index\n     */\n    this.isSelection = function(index) {\n      return (selectionIndex === index);\n    };\n\n    /**\n     * Clear selection\n     */\n    this.clearSelection = function() {\n      selectionIndex = undefined;\n    };\n\n    /**\n     * Confirm selection\n     */\n    this.confirmSelection = function(index) {\n\n      //If index not given, use current selection index\n      if (typeof index === 'undefined') {\n        index = selectionIndex;\n      }\n\n      //Validate index\n      if (\n        this.results.length === 0 ||\n        typeof this.results[index] === 'undefined') {\n        return;\n      }\n\n      //Select result\n      this.select(this.results[index]);\n    };\n  },\n});\n\n})(window, window.angular);\n"],"sourceRoot":"/source/"}