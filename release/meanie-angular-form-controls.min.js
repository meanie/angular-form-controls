!function(n,e,t){"use strict";e.module("FormControls.Component",["CheckBox.Component","CheckBoxes.Component","RadioButtons.Component","SelectBox.Component","TypeAhead.Component"]).factory("$formControls",function(){return{hasChanged:function(n){var t=n.previousValue,i=n.currentValue;return"UNINITIALIZED_VALUE"!==t&&!e.equals(t,i)}}})}(window,window.angular),function(n,e,t){"use strict";e.module("CheckBox.Component",[]).component("checkBox",{template:'<label class="check-box"\n      ng-transclude\n      ng-click="$ctrl.toggle()"\n      ng-class="{checked: $ctrl.isChecked(), disabled: $ctrl.isDisabled}"\n    ></label>',require:{ngModel:"ngModel"},transclude:!0,bindings:{model:"<ngModel",onChange:"&",isInverse:"<isInverse",isDisabled:"<ngDisabled",isRequired:"<ngRequired"},controller:["$element","$formControls",function(n,e){var t=this;this.$onInit=function(){n.addClass("check-box-wrapper"),this.ngModel.$isEmpty=function(){return t.isInverse?!!t.model:!t.model}},this.$onChanges=function(n){n.model&&(this.ngModel.$validate(),e.hasChanged(n.model)&&this.ngModel.$setDirty())},this.toggle=function(){if(!this.isDisabled){var n=!this.model;this.onChange({value:n})}},this.isChecked=function(){return this.isInverse?!this.model:!!this.model}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("CheckBoxes.Component",[]).component("checkBoxes",{template:'<div class="check-box-group {{$ctrl.classes}}">\n      <label class="check-box"\n        ng-repeat="option in $ctrl.options"\n        ng-click="$ctrl.toggle(option, $index)"\n        ng-class="{checked: $ctrl.isChecked(option, $index), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>',require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isDisabled:"<ngDisabled",isRequired:"<ngRequired"},controller:["$element","$attrs","$log","$formControls",function(n,t,i,l){function s(n,t){return"$index"===c?t:e.isObject(n)?c?"undefined"==typeof n[c]?(i.warn("Unknown property `"+c+"` for check box tracking"),null):n[c]:(i.warn("Missing track-by property for check boxes"),null):n}function o(n){return e.isObject(n)?u?"undefined"==typeof n[u]?(i.warn("Unknown property `"+u+"` for check box label"),""):n[u]:(i.warn("Missing label-by property for check boxes"),""):n}function r(n,t,i){if(!e.isArray(n)||0===n.length)return!1;var l=s(t,i),o=n.find(function(n){var e=s(n,n);return e===l});return"undefined"!=typeof o}var a=this,u=t.labelBy||null,c=t.trackBy||null,d="true"===t.asObject;this.$onInit=function(){d&&"$index"===c&&(i.warn("Cannot track check boxes by index if model is an object"),d=!1),this.classes=n[0].className,n[0].className="",this.ngModel.$isEmpty=function(){return a.ngModel.$$setOptions({allowInvalid:!0}),!e.isArray(a.model)||0===a.model.length}},this.$onChanges=function(n){e.isArray(this.options)||(this.options=[]),n.model&&(this.ngModel.$validate(),l.hasChanged(n.model)&&this.ngModel.$setDirty())},this.getLabel=function(n){return o(n)},this.isChecked=function(n,e){return r(this.model,n,e)},this.toggle=function(n,t){if(!this.isDisabled){var i=[];e.isArray(this.model)&&(i=this.model.map(function(n){return n}));var l=r(i,n,t),o=s(n,t);if(l){var a=i.findIndex(function(n){var e=s(n,n);return e===o});i.splice(a,1)}else i.push(d?n:o);this.onChange({value:i})}}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("RadioButtons.Component",[]).component("radioButtons",{template:'<div class="radio-button-group {{$ctrl.classes}}">\n      <label class="radio-button"\n        ng-if="$ctrl.isNullable"\n        ng-click="$ctrl.select(null)"\n        ng-class="{checked: $ctrl.isSelected(null), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.nullLabel}}</label>\n      <label class="radio-button"\n        ng-repeat="option in $ctrl.options"\n        ng-click="$ctrl.select(option, $index)"\n        ng-class="{checked: $ctrl.isSelected(option, $index), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>',require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isNullable:"<",nullValue:"<",nullLabel:"<",isDisabled:"<ngDisabled",isRequired:"<ngRequired"},controller:["$element","$attrs","$log","$formControls",function(n,t,i,l){function s(n,t){return null===n?u.nullValue:"$index"===d?t:e.isObject(n)?d?"undefined"==typeof n[d]?(i.warn("Unknown property `"+d+"` for radio tracking"),null):n[d]:(i.warn("Missing track-by property for radio buttons"),null):n}function o(n,e){return u.isNullable&&null===n?u.nullValue:h?n:s(n,e)}function r(n){return null===n?u.nullLabel:e.isObject(n)?c?"undefined"==typeof n[c]?(i.warn("Unknown property `"+c+"` for selectbox label"),""):n[c]:(i.warn("Missing label-by property for selectbox"),""):n}function a(n,e){if(u.isNullable&&u.model===u.nullValue&&null===n)return!0;if(null===u.model)return!1;var t=s(u.model,u.model),i=s(n,e);return t===i}var u=this,c=t.labelBy||null,d=t.trackBy||null,h="true"===t.asObject;this.$onInit=function(){h&&"$index"===d&&(i.warn("Cannot track radio buttons by index if model is an object"),h=!1),this.classes=n[0].className,n[0].className="",this.ngModel.$isEmpty=function(){return u.isNullable?u.model===u.nullValue:null===u.model||"undefined"==typeof u.model}},this.$onChanges=function(n){e.isArray(this.options)||(this.options=[]),"undefined"==typeof this.nullValue&&(this.nullValue=null),"undefined"==typeof this.nullLabel&&(this.nullLabel="None"),this.isNullable&&(null!==this.model&&"undefined"!=typeof this.model||(this.model=this.nullValue)),n.model&&(this.ngModel.$validate(),l.hasChanged(n.model)&&this.ngModel.$setDirty())},this.getLabel=function(n){return r(n)},this.isSelected=function(n,e){return a(n,e)},this.select=function(n,e){if(!this.isDisabled){var t=o(n,e);this.onChange({value:t,option:n})}}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("SelectBox.Component",[]).component("selectBox",{template:'<div class="select-box {{$ctrl.classes}}">\n      <div class="form-control-wrapper clickable" ng-click="$ctrl.toggleOptions()">\n        <span class="form-control-spinner" ng-class="{\'show-spinner\': $ctrl.hasSpinner}">\n          <span class="caret"\n            ng-click="$ctrl.toggleOptions(); $event.stopPropagation();"\n            ng-class="{disabled: $ctrl.isDisabled}"\n            ng-if="!$ctrl.hasSpinner"\n          ></span>\n          <input readonly class="form-control" type="text"\n            ng-value="$ctrl.getSelectedLabel()"\n            ng-keydown="$ctrl.keydown($event)"\n            ng-class="{disabled: ($ctrl.isDisabled || $ctrl.hasSpinner)}">\n          <spinner ng-if="$ctrl.hasSpinner"></spinner>\n        </span>\n      </div>\n      <ul class="select-box-options" ng-show="$ctrl.isShowingOptions">\n        <li\n          ng-if="$ctrl.isNullable || !$ctrl.hasOptions()"\n          ng-class="{selected: $ctrl.isSelection(-1)}"\n          ng-mouseover="$ctrl.setSelection(-1)"\n          ng-click="$ctrl.confirmSelection(-1)"\n        >{{$ctrl.nullLabel}}</li>\n        <li\n          ng-transclude\n          ng-repeat="option in $ctrl.options"\n          ng-class="{selected: $ctrl.isSelection($index)}"\n          ng-mouseover="$ctrl.setSelection($index)"\n          ng-click="$ctrl.confirmSelection($index)"\n        >{{$ctrl.getLabel(option)}}</li>\n      </ul>\n    </div>',transclude:!0,require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isNullable:"<",nullValue:"<",nullLabel:"<",isDisabled:"<ngDisabled",isRequired:"<ngRequired",hasSpinner:"<hasSpinner"},controller:["$element","$attrs","$log","$formControls","$scope","$document",function(n,t,i,l,s,o){function r(n,e){var t=void 0,i=function(){t&&clearTimeout(t),t=setTimeout(function(){return n()},e)};return i}function a(n){return n.keyCode>=48&&n.keyCode<=57||(n.keyCode>=65&&n.keyCode<=90||32===n.keyCode)}function u(n){!m[0].contains(n.target)&&y.isShowingOptions&&(s.$apply(y.hideOptions.bind(y)),n.preventDefault(),n.stopPropagation())}function c(){if(y.isNullable||!($<0)){var n=w[$+(y.isNullable?1:0)];if(n){var e=v[0].scrollTop,t=e+v[0].clientHeight,i=n.offsetTop,l=i+n.clientHeight;i<e?v[0].scrollTop-=e-i:l>t&&(v[0].scrollTop+=l-t)}}}function d(){var n=$;"undefined"==typeof $?y.isNullable?$=-1:y.options.length>0&&($=y.options.length-1):$>(y.isNullable?-1:0)&&$--,n!==$&&c()}function h(){var n=$;"undefined"==typeof $?y.isNullable?$=-1:y.options.length>0&&($=0):$<y.options.length-1&&$++,n!==$&&c()}function f(n,t){return null===n?y.nullValue:"$index"===C?t:e.isObject(n)?C?"undefined"==typeof n[C]?(i.warn("Unknown property `"+C+"` for select box tracking"),y.nullValue):n[C]:(i.warn("Missing track-by property for select box"),y.nullValue):n}function p(n,e){return y.isNullable&&null===n?y.nullValue:S?n:f(n,e)}function g(n){return null===n||"undefined"==typeof n?y.nullLabel:e.isObject(n)?k?"undefined"==typeof n[k]?(i.warn("Unknown property `"+k+"` for select box label"),""):n[k]:(i.warn("Missing label-by property for select box"),""):n}function b(n,e){if("undefined"==typeof n||n===y.nullValue)return null;if("$index"===C)return"undefined"!=typeof e[n]?e[n]:null;var t=f(n,n);return e.find(function(n,e){var i=f(n,e);return t===i})}var y=this,$=void 0,m=void 0,v=void 0,w=void 0,k=t.labelBy||null,C=t.trackBy||null,S="true"===t.asObject,x="",D={ENTER:13,ESC:27,SPACE:32,UP:38,DOWN:40},O=r(function(){x=""},1500);this.$onInit=function(){S&&"$index"===C&&(i.warn("Cannot track select box by index if model is an object"),S=!1),this.isShowingOptions=!1,this.classes=n[0].className,n[0].className="",m=n.find("input"),v=m.parent().next(),w=v.find("li"),o.find("body").on("click",u),this.ngModel.$isEmpty=function(){return y.isNullable?y.model===y.nullValue:null===y.model||"undefined"==typeof y.model}},this.$onDestroy=function(){o.find("body").off("click",u)},this.$onChanges=function(n){e.isArray(this.options)||(this.options=[]),"undefined"==typeof this.nullValue&&(this.nullValue=null),"undefined"==typeof this.nullLabel&&(this.nullLabel="..."),this.isNullable&&(null!==this.model&&"undefined"!=typeof this.model||(this.model=this.nullValue)),this.isDisabled&&(this.isShowingOptions=!1);var t=b(this.model,this.options);$=this.options.indexOf(t),n.model&&(this.ngModel.$validate(),l.hasChanged(n.model)&&this.ngModel.$setDirty())},this.keydown=function(n){if(n.keyCode===D.UP)n.preventDefault(),this.isShowingOptions?d():this.showOptions();else if(n.keyCode===D.DOWN)n.preventDefault(),this.isShowingOptions?h():this.showOptions();else if(n.keyCode===D.ENTER&&this.isShowingOptions)n.preventDefault(),this.confirmSelection();else if(n.keyCode===D.ESC&&this.isShowingOptions)n.preventDefault(),this.hideOptions();else if(n.keyCode!==D.ENTER||this.isShowingOptions){if(a(n)){var e=String.fromCharCode(n.keyCode);this.selectByInput(e)}}else n.preventDefault(),this.showOptions()},this.getSelectedLabel=function(){var n=b(this.model,this.options);return g(n)},this.getLabel=function(n){return g(n)},this.showOptions=function(){this.isDisabled||this.hasSpinner||(this.isShowingOptions=!0)},this.hideOptions=function(){this.isShowingOptions=!1},this.toggleOptions=function(){this.isShowingOptions?this.hideOptions():this.showOptions()},this.hasOptions=function(){return this.options.length>0},this.selectByInput=function(n){n=n.toLowerCase(),x+=n;var e=new RegExp("^"+x,"i"),t=this.options.find(function(n){var t=g(n);return t.match(e)});if(t){var i=this.options.findIndex(function(n){return n===t});this.select(t,i)}O()},this.select=function(n,e){if(!this.isDisabled){this.hideOptions();var t=p(n,e);this.onChange({value:t,option:n})}},this.setSelection=function(n){$=n},this.isSelection=function(n){return $===n},this.confirmSelection=function(n){"undefined"==typeof n&&(n=$);var e=void 0;if(this.isNullable&&n===-1)e=null;else{if(!this.hasOptions()||"undefined"==typeof n||"undefined"==typeof this.options[n])return;e=this.options[n]}this.select(e,n)}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("TypeAhead.Component",[]).component("typeAhead",{template:'<div class="type-ahead">\n      <span class="form-control-spinner"\n        ng-class="{\'show-spinner\': $ctrl.isSearching}">\n        <input class="form-control" type="text"\n          placeholder="{{$ctrl.placeholder}}"\n          ng-keydown="$ctrl.keydown($event)"\n          ng-keyup="$ctrl.keyup($event)"\n          ng-disabled="$ctrl.isDisabled"\n          ng-model="$ctrl.searchQuery">\n        <spinner></spinner>\n      </span>\n      <ul class="type-ahead-results" ng-show="$ctrl.isShowingResults">\n        <li\n          ng-repeat="item in $ctrl.results"\n          ng-class="{selected: $ctrl.isSelection($index)}"\n          ng-mouseover="$ctrl.setSelection($index)"\n          ng-click="$ctrl.confirmSelection($index)"\n          ng-transclude>\n          <span ng-bind-html="$ctrl.getLabel(item) |\n            markmatches:$ctrl.searchQuery:\'strong\'"></span>\n        </li>\n      </ul>\n    </div>',transclude:!0,require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",placeholder:"@",onSearch:"&",onChange:"&",onQuery:"&",isDisabled:"<ngDisabled",isRequired:"<ngRequired",labelBy:"@",trackBy:"@",asObject:"@",minLength:"@",allowNew:"@"},controller:["$element","$scope","$formControls","$attrs","$log","$q","$timeout","$document",function(n,i,l,s,o,r,a,u){function c(n){var e=[L.UP,L.DOWN,L.ENTER,L.ESC,L.TAB];return e.indexOf(n.keyCode)>-1}function d(n){!v[0].contains(n.target)&&C.isShowingResults&&(i.$apply(C.hideResults.bind(C)),n.preventDefault(),n.stopPropagation())}function h(){if(C.isNullable||!(S<0)){var n=k[S+(C.isNullable?1:0)];if(n){var e=w[0].scrollTop,t=e+w[0].clientHeight,i=n.offsetTop,l=i+n.clientHeight;i<e?w[0].scrollTop-=e-i:l>t&&(w[0].scrollTop+=l-t)}}}function f(){var n=S;"undefined"==typeof S?C.isNullable?S=-1:C.options.length>0&&(S=C.options.length-1):S>(C.isNullable?-1:0)&&S--,n!==S&&h()}function p(){var n=S;"undefined"==typeof S?C.isNullable?S=-1:C.options.length>0&&(S=0):S<C.options.length-1&&S++,n!==S&&h()}function g(n){return null!==n&&e.isObject(n)?O?"undefined"==typeof n[O]?(o.warn("Unknown property `"+O+"` for type ahead tracking"),null):n[O]:(o.warn("Missing track-by property for type ahead"),null):n}function b(n){return N?n:g(n)}function y(n){return null===n||"undefined"==typeof n?"":e.isObject(n)?D?"undefined"==typeof n[D]?(o.warn("Unknown property `"+D+"` for type ahead label"),""):n[D]:(o.warn("Missing label-by property for type ahead"),""):n}function $(n,e){if("undefined"==typeof n||n===C.nullValue)return null;if("$index"===O)return"undefined"!=typeof e[n]?e[n]:null;var t=g(n,n);return e.find(function(n,e){var i=g(n,e);return t===i})}function m(n){if(!n)return r.resolve([]);var e=new RegExp("(?:^|\\b)("+n+")","i"),t=C.options.filter(function(n){var t=y(n);return e.test(t)});return r.resolve(t)}var v=void 0,w=void 0,k=void 0,C=this,S=-1,x=100,D=s.labelBy||null,O=s.trackBy||null,N="true"===s.asObject,M="true"===s.allowNew,R=0,E=0,B=null,L={ENTER:13,ESC:27,SPACE:32,TAB:9,UP:38,DOWN:40};this.$onInit=function(){v=n.find("input"),w=v.parent().next(),k=w.find("li"),n.attr("tabindex",-1),n.on("focus",function(){v[0].focus()}),u.find("body").on("click",d),this.results=[],this.isSearching=!1,this.isShowingResults=!1,this.ngModel.$isEmpty=function(){return(null===C.model||"undefined"==typeof C.model)&&(!M||!C.searchQuery)}},this.$onDestroy=function(){u.find("body").off("click",d)},this.$onChanges=function(n){if(n.model){if(this.model){var t=void 0;e.isArray(this.options)?t=$(this.model,this.options):e.isObject(this.model)&&(t=this.model),t&&(this.searchQuery=y(t))}this.ngModel.$validate(),l.hasChanged(n.model)&&this.ngModel.$setDirty()}},this.getLabel=function(n){return y(n)},this.keydown=function(n){this.isShowingResults&&c(n)?n.keyCode===L.UP?(n.preventDefault(),f()):n.keyCode===L.DOWN?(n.preventDefault(),p()):n.keyCode===L.ESC?(n.preventDefault(),this.hideResults()):n.keyCode===L.TAB?this.hideResults():n.keyCode===L.ENTER&&(n.preventDefault(),this.confirmSelection()):n.keyCode===L.ENTER&&(n.preventDefault(),this.showResults())},this.keyup=function(n){if(!c(n)){var e=(this.searchQuery||"").trim();this.onQuery({value:e}),this.onChange({value:null,option:null}),this.ngModel.$validate(),this.ngModel.$setDirty(),!this.minLength||e.length>=this.minLength?this.search(e):this.hasResults()&&(this.clearResults(),this.clearSelection())}},this.search=function(n){var e=this;return B=a(function(){return B=null,e.doSearch(n)},x)},this.doSearch=function(n){var t=this,i=void 0;if(this.options&&e.isArray(this.options))i=m(n);else{if(!s.onSearch)return o.warn("No search handler or options specified"),r.reject();i=this.onSearch({value:n})}return this.isSearching=!0,i.then(function(n){return++R>E?n:r.reject("old search")}).then(function(n){t.clearSelection(),t.results=n,n&&n.length>0&&(t.isShowingResults=!0)})["finally"](function(){return t.isSearching=!1})},this.hasResults=function(){return this.results&&this.results.length>0},this.clearResults=function(){this.results=[],this.isShowingResults=!1},this.showResults=function(){this.hasResults()&&(this.isShowingResults=!0)},this.select=function(n){if(!this.isDisabled){this.hideResults();var e=b(n),t=y(n);this.searchQuery=t,this.onQuery({value:t}),this.onChange({value:e,option:n})}},this.hideResults=function(){this.isShowingResults=!1},this.setSelection=function(n){S=n},this.isSelection=function(n){return S===n},this.clearSelection=function(){S=t},this.confirmSelection=function(n){"undefined"==typeof n&&(n=S),0!==this.results.length&&"undefined"!=typeof this.results[n]&&this.select(this.results[n])}}]})}(window,window.angular);
//# sourceMappingURL=meanie-angular-form-controls.min.js.map
