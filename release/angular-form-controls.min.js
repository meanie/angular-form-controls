!function(n,e,t){"use strict";e.module("CheckBox.Component",[]).component("checkBox",{template:'<label class="CheckBox {{$ctrl.classes}}"\n      ng-transclude\n      ng-click="$ctrl.toggle($event)"\n      ng-class="{checked: $ctrl.isChecked(), disabled: $ctrl.isDisabled}"\n    ></label>',require:{ngModel:"ngModel"},transclude:!0,bindings:{model:"<ngModel",onChange:"&",isInverse:"<",isUndefined:"<",isDisabled:"<ngDisabled"},controller:["$element","$formControls",function(n,e){var t=this;this.$onInit=function(){this.classes=n[0].className,n[0].className="",n.addClass("CheckBoxWrapper");var e=n.find("label");n.on("focus",function(){e[0].focus()}),this.ngModel.$isEmpty=function(){return t.isInverse?!!t.model:!t.model}},this.$onChanges=function(n){n.model&&(this.ngModel.$validate(),e.hasChanged(n.model)&&this.ngModel.$setDirty())},this.toggle=function(n){if(!this.isDisabled&&!n.defaultPrevented){var e=!this.model;this.isUndefined&&!1===e&&(e=void 0),this.onChange({value:e})}},this.isChecked=function(){return this.isInverse?!this.model:!!this.model}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("CheckBoxes.Component",[]).component("checkBoxes",{template:'<div class="CheckBoxGroup {{$ctrl.classes}}">\n      <label class="CheckBox"\n        ng-repeat="option in $ctrl.options"\n        ng-click="$ctrl.toggle(option, $index)"\n        ng-class="{checked: $ctrl.isChecked(option, $index), disabled: ($ctrl.isDisabled || $ctrl.isOptionDisabled(option, $index))}"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>',require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",min:"<",max:"<",onChange:"&",single:"<",isDisabled:"<ngDisabled",disabledValues:"<"},controller:["$element","$attrs","$log","$formControls",function(n,t,i,l){function s(n,t){return"$index"===c?t:e.isObject(n)?c?void 0===n[c]?(i.warn("Unknown property `"+c+"` for check box tracking"),null):n[c]:(i.warn("Missing track-by property for check boxes"),null):n}function o(n){return e.isObject(n)?u?void 0===n[u]?(i.warn("Unknown property `"+u+"` for check box label"),""):n[u]:(i.warn("Missing label-by property for check boxes"),""):n}function r(n,t,i){if(!e.isArray(n)||0===n.length)return!1;var l=s(t,i);return void 0!==n.find(function(n){return s(n,n)===l})}var a=this,u=t.labelBy||null,c=t.trackBy||null,h="true"===t.asObject;this.$onInit=function(){h&&"$index"===c&&(i.warn("Cannot track check boxes by index if model is an object"),h=!1),this.classes=n[0].className,n[0].className="",this.ngModel.$validators.min=function(n){return!!a.ngModel.$error.required||(!a.min||a.min<0||(!e.isArray(n)||n.length>=a.min))},this.ngModel.$validators.max=function(n){return!!a.ngModel.$error.required||(!a.max||a.max<0||(!e.isArray(n)||n.length<=a.max))},this.ngModel.$isEmpty=function(){return"function"==typeof a.ngModel.$$setOptions?a.ngModel.$$setOptions({allowInvalid:!0}):a.ngModel.$options=a.ngModel.$options.createChild({allowInvalid:!0}),!e.isArray(a.model)||0===a.model.length}},this.$onChanges=function(n){if(!e.isArray(this.options))if("string"==typeof this.options){var t=this.options.split("\n"),i=new Set(t);this.options=Array.from(i.values())}else this.options=[];n.model&&(this.ngModel.$validate(),l.hasChanged(n.model)&&this.ngModel.$setDirty())},this.getLabel=function(n){return o(n)},this.isChecked=function(n,e){return r(this.model,n,e)},this.isOptionDisabled=function(n,e){if(!this.disabledValues||!Array.isArray(this.disabledValues))return!1;var t=s(n,e);return this.disabledValues.includes(t)},this.toggle=function(n,t){if(!this.isDisabled&&!this.isOptionDisabled(n,t)){var i=[];e.isArray(this.model)&&(i=this.model.map(function(n){return n}));var l=r(i,n,t),o=s(n,t);if(l){var a=i.findIndex(function(n){return s(n,n)===o});i.splice(a,1)}else this.single?i=[h?n:o]:i.push(h?n:o);this.onChange({value:i})}}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("FormControls.Component",["CheckBox.Component","CheckBoxes.Component","RadioButtons.Component","SelectBox.Component","TypeAhead.Component"]).factory("$formControls",function(){return{hasChanged:function(n){var t=n.previousValue,i=n.currentValue;return"UNINITIALIZED_VALUE"!==t&&!e.equals(t,i)}}})}(window,window.angular),function(n,e,t){"use strict";e.module("RadioButtons.Component",[]).component("radioButtons",{template:'<div class="RadioButtonGroup {{$ctrl.classes}}">\n      <label class="RadioButton"\n        ng-if="$ctrl.isNullable"\n        ng-click="$ctrl.select(null)"\n        ng-class="{checked: $ctrl.isSelected(null), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.nullLabel}}</label>\n      <label class="RadioButton"\n        ng-repeat="option in $ctrl.options"\n        ng-click="$ctrl.select(option, $index)"\n        ng-class="{checked: $ctrl.isSelected(option, $index), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>',require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isNullable:"<",nullValue:"<",nullLabel:"<",isDisabled:"<ngDisabled"},controller:["$element","$attrs","$log","$formControls",function(n,t,i,l){function s(n,t){return null===n?u.nullValue:"$index"===h?t:e.isObject(n)?h?void 0===n[h]?(i.warn("Unknown property `"+h+"` for radio tracking"),null):n[h]:(i.warn("Missing track-by property for radio buttons"),null):n}function o(n,e){return u.isNullable&&null===n?u.nullValue:d?n:s(n,e)}function r(n){return null===n?u.nullLabel:e.isObject(n)?c?void 0===n[c]?(i.warn("Unknown property `"+c+"` for selectbox label"),""):n[c]:(i.warn("Missing label-by property for selectbox"),""):n}function a(n,e){return!(!u.isNullable||u.model!==u.nullValue||null!==n)||null!==u.model&&s(u.model,u.model)===s(n,e)}var u=this,c=t.labelBy||null,h=t.trackBy||null,d="true"===t.asObject;this.$onInit=function(){d&&"$index"===h&&(i.warn("Cannot track radio buttons by index if model is an object"),d=!1),this.classes=n[0].className,n[0].className="",this.ngModel.$isEmpty=function(){return u.isNullable?u.model===u.nullValue:null===u.model||u.model===u.nullValue||void 0===u.model}},this.$onChanges=function(n){if(!e.isArray(this.options))if("string"==typeof this.options){var t=this.options.split("\n"),i=new Set(t);this.options=Array.from(i.values())}else this.options=[];void 0===this.nullValue&&(this.nullValue=null),void 0===this.nullLabel&&(this.nullLabel="None"),this.isNullable&&(null!==this.model&&void 0!==this.model||(this.model=this.nullValue)),n.model&&(this.ngModel.$validate(),l.hasChanged(n.model)&&this.ngModel.$setDirty())},this.getLabel=function(n){return r(n)},this.isSelected=function(n,e){return a(n,e)},this.select=function(n,e){if(!this.isDisabled){var t=o(n,e);this.onChange({value:t,option:n})}}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("SelectBox.Component",[]).component("selectBox",{template:'<div class="SelectBox {{$ctrl.selectBoxClass}}">\n      <div class="InputWrapper is-clickable" ng-click="$ctrl.toggleOptions()">\n        <div class="Caret"\n          ng-class="{disabled: $ctrl.isDisabled}"\n          ng-click="$event.stopPropagation(); $ctrl.toggleOptions();"\n          ng-if="!$ctrl.hasSpinner"\n        ></div>\n        <input readonly class="Input {{$ctrl.inputClass}}" type="text"\n          ng-value="$ctrl.getSelectedLabel()"\n          ng-keydown="$ctrl.keydown($event)"\n          ng-class="{disabled: ($ctrl.isDisabled || $ctrl.hasSpinner)}">\n        <spinner class="Spinner--input" ng-if="$ctrl.hasSpinner"></spinner>\n      </div>\n      <ul class="SelectBox-options" ng-if="$ctrl.isShowingOptions">\n        <li\n          ng-if="$ctrl.isNullable || !$ctrl.hasOptions()"\n          ng-class="{selected: $ctrl.isSelection(-1)}"\n          ng-mouseover="$ctrl.setSelection(-1)"\n          ng-click="$ctrl.confirmSelection(-1); $event.preventDefault();"\n        >{{$ctrl.nullLabel}}</li>\n        <li\n          ng-transclude\n          ng-repeat="option in $ctrl.options"\n          ng-class="{selected: $ctrl.isSelection($index)}"\n          ng-mouseover="$ctrl.setSelection($index)"\n          ng-click="$ctrl.confirmSelection($index); $event.preventDefault();"\n        >{{$ctrl.getLabel(option)}}</li>\n      </ul>\n    </div>',transclude:!0,require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isNullable:"<",nullValue:"<",nullLabel:"<",inputClass:"@",filter:"@",isDisabled:"<ngDisabled",hasSpinner:"<hasSpinner"},controller:["$element","$attrs","$log","$filter","$formControls","$scope","$document","$timeout","$window",function(n,t,i,l,s,o,r,a,u){function c(n){return n.keyCode>=48&&n.keyCode<=57||(n.keyCode>=65&&n.keyCode<=90||32===n.keyCode)}function h(e){k.isShowingOptions&&!n[0].contains(e.target)&&(o.$apply(k.hideOptions.bind(k)),e.preventDefault(),e.stopPropagation())}function d(n){var e=n.parent();if(0===e.length)return null;var t=u.getComputedStyle(e[0]);return"BODY"===e[0].tagName||"auto"===t.overflowY?e:d(e)}function f(n,e){for(var t=n.offsetTop;n.offsetParent&&n.offsetParent!==e;)t+=(n=n.offsetParent).offsetTop;return t}function p(){if(k.isShowingOptions){var e=d(n);if(e){var t=S.parent().next(),i=f(t[0],e[0]),l=e[0].clientHeight,s=i-e[0].scrollTop+t[0].clientHeight;if(s>l){var o=s-l+16;e[0].scrollTop+=o}}}}function g(){if(k.isShowingOptions&&(k.isNullable||!(C<0))){var n=S.parent().next(),e=n.children()[C+(k.isNullable?1:0)];if(e){var t=n[0].scrollTop,i=t+n[0].clientHeight,l=e.offsetTop,s=l+e.clientHeight;l<t?n[0].scrollTop-=t-l:s>i&&(n[0].scrollTop+=s-i)}}}function b(){var n=C;void 0===C?k.isNullable?C=-1:k.options.length>0&&(C=k.options.length-1):C>(k.isNullable?-1:0)&&C--,n!==C&&g()}function $(){var n=C;void 0===C?k.isNullable?C=-1:k.options.length>0&&(C=0):C<k.options.length-1&&C++,n!==C&&g()}function v(n,t){return null===n?k.nullValue:"$index"===O?t:e.isObject(n)?O?void 0===n[O]?(i.warn("Unknown property `"+O+"` for select box tracking"),k.nullValue):n[O]:(i.warn("Missing track-by property for select box"),k.nullValue):n}function m(n,e){return k.isNullable&&null===n?k.nullValue:D?n:v(n,e)}function y(n){return null===n||void 0===n?k.nullLabel:e.isObject(n)?x?void 0===n[x]?(i.warn("Unknown property `"+x+"` for select box label"),""):k.$filter?k.$filter(n[x]):n[x]:(i.warn("Missing label-by property for select box"),""):k.$filter?k.$filter(n):n}function w(n,e){if(void 0===n||n===k.nullValue)return null;if("$index"===O)return void 0!==e[n]?e[n]:null;var t=v(n,n);return e.find(function(n,e){var i=v(n,e);return t===i})}var k=this,C=void 0,S=void 0,x=t.labelBy||null,O=t.trackBy||null,D="true"===t.asObject,M="",N=function(n,e){var t=void 0;return function(){t&&clearTimeout(t),t=setTimeout(function(){return n()},e)}}(function(){M=""},1e3);this.$onInit=function(){D&&"$index"===O&&(i.warn("Cannot track select box by index if model is an object"),D=!1),this.isShowingOptions=!1,this.filter&&(this.$filter=l(this.filter)),this.selectBoxClass=n[0].className,n[0].className="",S=n.find("input"),r.find("body").on("click",h),this.ngModel.$isEmpty=function(){return k.isNullable?k.model===k.nullValue:null===k.model||k.model===k.nullValue||void 0===k.model}},this.$onDestroy=function(){r.find("body").off("click",h)},this.$onChanges=function(n){if(!e.isArray(this.options))if("string"==typeof this.options){var t=this.options.split("\n"),i=new Set(t);this.options=Array.from(i.values())}else this.options=[];void 0===this.nullValue&&(this.nullValue=null),void 0===this.nullLabel&&(this.nullLabel="..."),this.isNullable&&(null!==this.model&&void 0!==this.model||(this.model=this.nullValue)),this.isDisabled&&(this.isShowingOptions=!1);var l=w(this.model,this.options);C=this.options.indexOf(l),n.model&&(this.ngModel.$validate(),s.hasChanged(n.model)&&this.ngModel.$setDirty())},this.keydown=function(n){if(38===n.keyCode)n.preventDefault(),this.isShowingOptions?b():this.showOptions();else if(40===n.keyCode)n.preventDefault(),this.isShowingOptions?$():this.showOptions();else if(13===n.keyCode&&this.isShowingOptions)n.preventDefault(),this.confirmSelection();else if(27===n.keyCode&&this.isShowingOptions)n.preventDefault(),this.hideOptions();else if(13!==n.keyCode||this.isShowingOptions){if(c(n)){var e=String.fromCharCode(n.keyCode);this.selectByInput(e)}}else n.preventDefault(),this.showOptions()},this.getSelectedLabel=function(){return y(w(this.model,this.options))},this.getLabel=function(n){return y(n)},this.showOptions=function(){this.isDisabled||this.hasSpinner||(this.isShowingOptions=!0,a(function(){p(),g()}))},this.hideOptions=function(){this.isShowingOptions=!1},this.toggleOptions=function(){this.isShowingOptions?this.hideOptions():this.showOptions()},this.hasOptions=function(){return this.options.length>0},this.selectByInput=function(n){n=n.toLowerCase(),M+=n;var e=new RegExp("^"+M,"i"),t=this.options.find(function(n){var t=y(n);return String(t).match(e)});if(t){var i=this.options.findIndex(function(n){return n===t});this.select(t,i,!0)}N()},this.select=function(n,e,t){if(!this.isDisabled){t?g():this.hideOptions();var i=m(n,e);this.onChange({value:i,option:n})}},this.setSelection=function(n){C=n},this.isSelection=function(n){return C===n},this.confirmSelection=function(n){void 0===n&&(n=C);var e=void 0;if(this.isNullable&&-1===n)e=null;else{if(!this.hasOptions()||void 0===n||void 0===this.options[n])return;e=this.options[n]}this.select(e,n)}}]})}(window,window.angular),function(n,e,t){"use strict";e.module("TypeAhead.Component",[]).component("typeAhead",{template:'<div class="TypeAhead {{$ctrl.typeAheadClass}}">\n      <input class="Input {{$ctrl.inputClass}}" type="text"\n        placeholder="{{$ctrl.placeholder}}"\n        ng-keydown="$ctrl.keydown($event)"\n        ng-keyup="$ctrl.keyup($event)"\n        ng-disabled="$ctrl.isDisabled"\n        ng-model="$ctrl.searchQuery">\n      <spinner class="Spinner--input" ng-if="$ctrl.isSearching"></spinner>\n      <ul class="TypeAhead-results" ng-if="$ctrl.isShowingResults">\n        <li\n          ng-repeat="item in $ctrl.results"\n          ng-class="{selected: $ctrl.isSelection($index)}"\n          ng-mouseover="$ctrl.setSelection($index)"\n          ng-click="$ctrl.confirmSelection($index)"\n          ng-transclude>\n          <span ng-bind-html="$ctrl.getLabel(item) |\n            markmatches:$ctrl.searchQuery:\'strong\'"></span>\n        </li>\n      </ul>\n    </div>',transclude:!0,require:{ngModel:"ngModel"},bindings:{model:"<ngModel",inputClass:"@",options:"<",placeholder:"@",debounce:"<",clearInput:"<",onSearch:"&",onChange:"&",onQuery:"&",isDisabled:"<ngDisabled",labelBy:"@",trackBy:"@",asObject:"@",minLength:"@",allowNew:"@"},controller:["$element","$scope","$formControls","$attrs","$log","$q","$timeout","$document",function(n,t,i,l,s,o,r,a){function u(n){return[L,I,R,A,N,B,V,j,T,U,Q,q,E].indexOf(n.keyCode)>-1}function c(n){!m[0].contains(n.target)&&w.isShowingResults&&(t.$apply(w.hideResults.bind(w)),n.preventDefault(),n.stopPropagation())}function h(){if(w.isShowingResults&&(w.isNullable||!(y<0))){var n=m.next().next(),e=n.find("li")[y+(w.isNullable?1:0)];if(e){var t=n[0].scrollTop,i=t+n[0].clientHeight,l=e.offsetTop,s=l+e.clientHeight;l<t?n[0].scrollTop-=t-l:s>i&&(n[0].scrollTop+=s-i)}}}function d(){var n=y;void 0===y?w.isNullable?y=-1:w.results.length>0&&(y=w.results.length-1):y>(w.isNullable?-1:0)&&y--,n!==y&&h()}function f(){var n=y;void 0===y?w.isNullable?y=-1:w.results.length>0&&(y=0):y<w.results.length-1&&y++,n!==y&&h()}function p(n){return null!==n&&e.isObject(n)?C?void 0===n[C]?(s.warn("Unknown property `"+C+"` for type ahead tracking"),null):n[C]:(s.warn("Missing track-by property for type ahead"),null):n}function g(n){return S?n:p(n)}function b(n){return null===n||void 0===n?"":e.isObject(n)?k?void 0===n[k]?(s.warn("Unknown property `"+k+"` for type ahead label"),""):n[k]:(s.warn("Missing label-by property for type ahead"),""):n}function $(n,e){if(void 0===n||n===w.nullValue)return null;if("$index"===C)return void 0!==e[n]?e[n]:null;var t=p(n,n);return e.find(function(n,e){var i=p(n,e);return t===i})}function v(n){if(!n)return o.resolve([]);var e=new RegExp("(?:^|\\b)("+n+")","i"),t=w.options.filter(function(n){var t=b(n);return e.test(t)});return o.resolve(t)}var m=void 0,y=-1,w=this,k=l.labelBy||null,C=l.trackBy||null,S="true"===l.asObject,x="true"===l.allowNew,O=0,D=0,M=null,N=13,B=27,V=9,R=37,L=38,A=39,I=40,j=16,T=17,U=18,Q=20,q=91,E=93;this.$onInit=function(){m=n.find("input"),n.attr("tabindex",-1),n.on("focus",function(){m[0].focus()}),this.typeAheadClass=n[0].className,n[0].className="",a.find("body").on("click",c),this.results=[],this.isSearching=!1,this.isShowingResults=!1,this.ngModel.$isEmpty=function(){return(null===w.model||void 0===w.model)&&(!x||!w.searchQuery)}},this.$onDestroy=function(){a.find("body").off("click",c)},this.$onChanges=function(n){if(n.clearInput&&(this.searchQuery=""),n.model){if(this.model){var t=void 0;e.isArray(this.options)?t=$(this.model,this.options):e.isObject(this.model)&&(t=this.model),t&&(this.searchQuery=b(t))}this.ngModel.$validate(),i.hasChanged(n.model)&&this.ngModel.$setDirty()}},this.getLabel=function(n){return b(n)},this.keydown=function(n){this.isShowingResults?n.keyCode===L?(n.preventDefault(),d()):n.keyCode===I?(n.preventDefault(),f()):n.keyCode===B?(n.preventDefault(),this.hideResults()):n.keyCode===V?this.hideResults():n.keyCode===N&&(n.preventDefault(),this.confirmSelection()):n.keyCode===N&&(n.preventDefault(),this.showResults())},this.keyup=function(n){if(!u(n)){var e=(this.searchQuery||"").trim();e!==this.lastValue&&(this.lastValue=e,this.onQuery({value:e}),this.onChange({value:null,option:null}),this.ngModel.$validate(),this.ngModel.$setDirty(),M&&r.cancel(M),!this.minLength||e.length>=this.minLength?this.search(e):this.hasResults()&&(this.clearResults(),this.clearSelection()))}},this.search=function(n){var e=this;return M=r(function(){return M=null,e.doSearch(n)},this.debounce||250)},this.doSearch=function(n){var t=this,i=void 0;if(this.options&&e.isArray(this.options))i=v(n);else{if(!l.onSearch)return s.warn("No search handler or options specified"),o.reject();i=this.onSearch({value:n})}return this.isSearching=!0,i.then(function(n){return++O>D?n:o.reject("old search")}).then(function(n){t.clearSelection(),t.results=n,n&&n.length>0&&(t.isShowingResults=!0),D=O}).finally(function(){return t.isSearching=!1})},this.hasResults=function(){return this.results&&this.results.length>0},this.clearResults=function(){this.results=[],this.isShowingResults=!1},this.showResults=function(){this.hasResults()&&(this.isShowingResults=!0)},this.select=function(n){if(!this.isDisabled){this.hideResults();var e=g(n),t=b(n);this.searchQuery=t,this.onQuery({value:t}),this.onChange({value:e,option:n})}},this.hideResults=function(){this.isShowingResults=!1},this.setSelection=function(n){y=n},this.isSelection=function(n){return y===n},this.clearSelection=function(){y=void 0},this.confirmSelection=function(n){void 0===n&&(n=y),0!==this.results.length&&void 0!==this.results[n]&&this.select(this.results[n])}}]})}(window,window.angular);
//# sourceMappingURL=angular-form-controls.min.js.map
