!function(e,n,t){"use strict";n.module("CheckBox.Component",[]).component("checkBox",{template:'<label class="CheckBox {{$ctrl.classes}}"\n      ng-transclude\n      ng-click="$ctrl.toggle($event)"\n      ng-class="{checked: $ctrl.isChecked(), disabled: $ctrl.isDisabled}"\n    ></label>',require:{ngModel:"ngModel"},transclude:!0,bindings:{model:"<ngModel",onChange:"&",isInverse:"<isInverse",isDisabled:"<ngDisabled"},controller:["$element","$formControls",function(e,n){var t=this;this.$onInit=function(){this.classes=e[0].className,e[0].className="",e.addClass("CheckBoxWrapper");var n=e.find("label");e.on("focus",function(){n[0].focus()}),this.ngModel.$isEmpty=function(){return t.isInverse?!!t.model:!t.model}},this.$onChanges=function(e){e.model&&(this.ngModel.$validate(),n.hasChanged(e.model)&&this.ngModel.$setDirty())},this.toggle=function(e){if(!this.isDisabled&&!e.defaultPrevented){var n=!this.model;this.onChange({value:n})}},this.isChecked=function(){return this.isInverse?!this.model:!!this.model}}]})}(window,window.angular),function(e,n,t){"use strict";n.module("CheckBoxes.Component",[]).component("checkBoxes",{template:'<div class="CheckBoxGroup {{$ctrl.classes}}">\n      <label class="CheckBox"\n        ng-repeat="option in $ctrl.options"\n        ng-click="$ctrl.toggle(option, $index)"\n        ng-class="{checked: $ctrl.isChecked(option, $index), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>',require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",min:"<",max:"<",onChange:"&",isDisabled:"<ngDisabled"},controller:["$element","$attrs","$log","$formControls",function(e,t,i,l){function s(e,t){return"$index"===c?t:n.isObject(e)?c?"undefined"==typeof e[c]?(i.warn("Unknown property `"+c+"` for check box tracking"),null):e[c]:(i.warn("Missing track-by property for check boxes"),null):e}function o(e){return n.isObject(e)?u?"undefined"==typeof e[u]?(i.warn("Unknown property `"+u+"` for check box label"),""):e[u]:(i.warn("Missing label-by property for check boxes"),""):e}function r(e,t,i){if(!n.isArray(e)||0===e.length)return!1;var l=s(t,i),o=e.find(function(e){var n=s(e,e);return n===l});return"undefined"!=typeof o}var a=this,u=t.labelBy||null,c=t.trackBy||null,d="true"===t.asObject;this.$onInit=function(){d&&"$index"===c&&(i.warn("Cannot track check boxes by index if model is an object"),d=!1),this.classes=e[0].className,e[0].className="",this.ngModel.$validators.min=function(e){return!!a.ngModel.$error.required||(!a.min||a.min<0||(!n.isArray(e)||e.length>=a.min))},this.ngModel.$validators.max=function(e){return!!a.ngModel.$error.required||(!a.max||a.max<0||(!n.isArray(e)||e.length<=a.max))},this.ngModel.$isEmpty=function(){return"function"==typeof a.ngModel.$$setOptions?a.ngModel.$$setOptions({allowInvalid:!0}):a.ngModel.$options=a.ngModel.$options.createChild({allowInvalid:!0}),!n.isArray(a.model)||0===a.model.length}},this.$onChanges=function(e){if(!n.isArray(this.options))if("string"==typeof this.options){var t=this.options.split("\n"),i=new Set(t);this.options=Array.from(i.values())}else this.options=[];e.model&&(this.ngModel.$validate(),l.hasChanged(e.model)&&this.ngModel.$setDirty())},this.getLabel=function(e){return o(e)},this.isChecked=function(e,n){return r(this.model,e,n)},this.toggle=function(e,t){if(!this.isDisabled){var i=[];n.isArray(this.model)&&(i=this.model.map(function(e){return e}));var l=r(i,e,t),o=s(e,t);if(l){var a=i.findIndex(function(e){var n=s(e,e);return n===o});i.splice(a,1)}else i.push(d?e:o);this.onChange({value:i})}}}]})}(window,window.angular),function(e,n,t){"use strict";n.module("FormControls.Component",["CheckBox.Component","CheckBoxes.Component","RadioButtons.Component","SelectBox.Component","TypeAhead.Component"]).factory("$formControls",function(){return{hasChanged:function(e){var t=e.previousValue,i=e.currentValue;return"UNINITIALIZED_VALUE"!==t&&!n.equals(t,i)}}})}(window,window.angular),function(e,n,t){"use strict";n.module("RadioButtons.Component",[]).component("radioButtons",{template:'<div class="RadioButtonGroup {{$ctrl.classes}}">\n      <label class="RadioButton"\n        ng-if="$ctrl.isNullable"\n        ng-click="$ctrl.select(null)"\n        ng-class="{checked: $ctrl.isSelected(null), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.nullLabel}}</label>\n      <label class="RadioButton"\n        ng-repeat="option in $ctrl.options"\n        ng-click="$ctrl.select(option, $index)"\n        ng-class="{checked: $ctrl.isSelected(option, $index), disabled: $ctrl.isDisabled}"\n      >{{$ctrl.getLabel(option)}}</label>\n    </div>',require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isNullable:"<",nullValue:"<",nullLabel:"<",isDisabled:"<ngDisabled"},controller:["$element","$attrs","$log","$formControls",function(e,t,i,l){function s(e,t){return null===e?u.nullValue:"$index"===d?t:n.isObject(e)?d?"undefined"==typeof e[d]?(i.warn("Unknown property `"+d+"` for radio tracking"),null):e[d]:(i.warn("Missing track-by property for radio buttons"),null):e}function o(e,n){return u.isNullable&&null===e?u.nullValue:h?e:s(e,n)}function r(e){return null===e?u.nullLabel:n.isObject(e)?c?"undefined"==typeof e[c]?(i.warn("Unknown property `"+c+"` for selectbox label"),""):e[c]:(i.warn("Missing label-by property for selectbox"),""):e}function a(e,n){if(u.isNullable&&u.model===u.nullValue&&null===e)return!0;if(null===u.model)return!1;var t=s(u.model,u.model),i=s(e,n);return t===i}var u=this,c=t.labelBy||null,d=t.trackBy||null,h="true"===t.asObject;this.$onInit=function(){h&&"$index"===d&&(i.warn("Cannot track radio buttons by index if model is an object"),h=!1),this.classes=e[0].className,e[0].className="",this.ngModel.$isEmpty=function(){return u.isNullable?u.model===u.nullValue:null===u.model||u.model===u.nullValue||"undefined"==typeof u.model}},this.$onChanges=function(e){if(!n.isArray(this.options))if("string"==typeof this.options){var t=this.options.split("\n"),i=new Set(t);this.options=Array.from(i.values())}else this.options=[];"undefined"==typeof this.nullValue&&(this.nullValue=null),"undefined"==typeof this.nullLabel&&(this.nullLabel="None"),this.isNullable&&(null!==this.model&&"undefined"!=typeof this.model||(this.model=this.nullValue)),e.model&&(this.ngModel.$validate(),l.hasChanged(e.model)&&this.ngModel.$setDirty())},this.getLabel=function(e){return r(e)},this.isSelected=function(e,n){return a(e,n)},this.select=function(e,n){if(!this.isDisabled){var t=o(e,n);this.onChange({value:t,option:e})}}}]})}(window,window.angular),function(e,n,t){"use strict";n.module("SelectBox.Component",[]).component("selectBox",{template:'<div class="SelectBox {{$ctrl.selectBoxClass}}">\n      <div class="InputWrapper is-clickable" ng-click="$ctrl.toggleOptions()">\n        <div class="Caret"\n          ng-class="{disabled: $ctrl.isDisabled}"\n          ng-click="$event.stopPropagation(); $ctrl.toggleOptions();"\n          ng-if="!$ctrl.hasSpinner"\n        ></div>\n        <input readonly class="Input {{$ctrl.inputClass}}" type="text"\n          ng-value="$ctrl.getSelectedLabel()"\n          ng-keydown="$ctrl.keydown($event)"\n          ng-class="{disabled: ($ctrl.isDisabled || $ctrl.hasSpinner)}">\n        <spinner class="Spinner--input" ng-if="$ctrl.hasSpinner"></spinner>\n      </div>\n      <ul class="SelectBox-options" ng-if="$ctrl.isShowingOptions">\n        <li\n          ng-if="$ctrl.isNullable || !$ctrl.hasOptions()"\n          ng-class="{selected: $ctrl.isSelection(-1)}"\n          ng-mouseover="$ctrl.setSelection(-1)"\n          ng-click="$ctrl.confirmSelection(-1); $event.preventDefault();"\n        >{{$ctrl.nullLabel}}</li>\n        <li\n          ng-transclude\n          ng-repeat="option in $ctrl.options"\n          ng-class="{selected: $ctrl.isSelection($index)}"\n          ng-mouseover="$ctrl.setSelection($index)"\n          ng-click="$ctrl.confirmSelection($index); $event.preventDefault();"\n        >{{$ctrl.getLabel(option)}}</li>\n      </ul>\n    </div>',transclude:!0,require:{ngModel:"ngModel"},bindings:{model:"<ngModel",options:"<",onChange:"&",isNullable:"<",nullValue:"<",nullLabel:"<",inputClass:"@",isDisabled:"<ngDisabled",hasSpinner:"<hasSpinner"},controller:["$element","$attrs","$log","$formControls","$scope","$document","$timeout","$window",function(e,t,i,l,s,o,r,a){function u(e,n){var t=void 0,i=function(){t&&clearTimeout(t),t=setTimeout(function(){return e()},n)};return i}function c(e){return e.keyCode>=48&&e.keyCode<=57||(e.keyCode>=65&&e.keyCode<=90||32===e.keyCode)}function d(n){k.isShowingOptions&&!e[0].contains(n.target)&&(s.$apply(k.hideOptions.bind(k)),n.preventDefault(),n.stopPropagation())}function h(e){var n=e.parent();if(0===n.length)return null;var t=a.getComputedStyle(n[0]);return"BODY"===n[0].tagName||"auto"===t.overflowY?n:h(n)}function f(e,n){for(var t=e.offsetTop;e.offsetParent&&e.offsetParent!==n;)e=e.offsetParent,t+=e.offsetTop;return t}function p(){if(k.isShowingOptions){var n=h(e);if(n){var t=S.parent().next(),i=f(t[0],n[0]),l=n[0].clientHeight,s=n[0].scrollTop,o=i-s+t[0].clientHeight;if(o>l){var r=o-l+16;n[0].scrollTop+=r}}}}function g(){if(k.isShowingOptions&&(k.isNullable||!(C<0))){var e=S.parent().next(),n=e.children(),t=n[C+(k.isNullable?1:0)];if(t){var i=e[0].scrollTop,l=i+e[0].clientHeight,s=t.offsetTop,o=s+t.clientHeight;s<i?e[0].scrollTop-=i-s:o>l&&(e[0].scrollTop+=o-l)}}}function y(){var e=C;"undefined"==typeof C?k.isNullable?C=-1:k.options.length>0&&(C=k.options.length-1):C>(k.isNullable?-1:0)&&C--,e!==C&&g()}function b(){var e=C;"undefined"==typeof C?k.isNullable?C=-1:k.options.length>0&&(C=0):C<k.options.length-1&&C++,e!==C&&g()}function m(e,t){return null===e?k.nullValue:"$index"===O?t:n.isObject(e)?O?"undefined"==typeof e[O]?(i.warn("Unknown property `"+O+"` for select box tracking"),k.nullValue):e[O]:(i.warn("Missing track-by property for select box"),k.nullValue):e}function $(e,n){return k.isNullable&&null===e?k.nullValue:D?e:m(e,n)}function v(e){return null===e||"undefined"==typeof e?k.nullLabel:n.isObject(e)?x?"undefined"==typeof e[x]?(i.warn("Unknown property `"+x+"` for select box label"),""):e[x]:(i.warn("Missing label-by property for select box"),""):e}function w(e,n){if("undefined"==typeof e||e===k.nullValue)return null;if("$index"===O)return"undefined"!=typeof n[e]?n[e]:null;var t=m(e,e);return n.find(function(e,n){var i=m(e,n);return t===i})}var k=this,C=void 0,S=void 0,x=t.labelBy||null,O=t.trackBy||null,D="true"===t.asObject,M="",N=13,B=27,R=38,L=40,V=u(function(){M=""},1e3);this.$onInit=function(){D&&"$index"===O&&(i.warn("Cannot track select box by index if model is an object"),D=!1),this.isShowingOptions=!1,this.selectBoxClass=e[0].className,e[0].className="",S=e.find("input"),o.find("body").on("click",d),this.ngModel.$isEmpty=function(){return k.isNullable?k.model===k.nullValue:null===k.model||k.model===k.nullValue||"undefined"==typeof k.model}},this.$onDestroy=function(){o.find("body").off("click",d)},this.$onChanges=function(e){if(!n.isArray(this.options))if("string"==typeof this.options){var t=this.options.split("\n"),i=new Set(t);this.options=Array.from(i.values())}else this.options=[];"undefined"==typeof this.nullValue&&(this.nullValue=null),"undefined"==typeof this.nullLabel&&(this.nullLabel="..."),this.isNullable&&(null!==this.model&&"undefined"!=typeof this.model||(this.model=this.nullValue)),this.isDisabled&&(this.isShowingOptions=!1);var s=w(this.model,this.options);C=this.options.indexOf(s),e.model&&(this.ngModel.$validate(),l.hasChanged(e.model)&&this.ngModel.$setDirty())},this.keydown=function(e){if(e.keyCode===R)e.preventDefault(),this.isShowingOptions?y():this.showOptions();else if(e.keyCode===L)e.preventDefault(),this.isShowingOptions?b():this.showOptions();else if(e.keyCode===N&&this.isShowingOptions)e.preventDefault(),this.confirmSelection();else if(e.keyCode===B&&this.isShowingOptions)e.preventDefault(),this.hideOptions();else if(e.keyCode!==N||this.isShowingOptions){if(c(e)){var n=String.fromCharCode(e.keyCode);this.selectByInput(n)}}else e.preventDefault(),this.showOptions()},this.getSelectedLabel=function(){var e=w(this.model,this.options);return v(e)},this.getLabel=function(e){return v(e)},this.showOptions=function(){this.isDisabled||this.hasSpinner||(this.isShowingOptions=!0,r(function(){p(),g()}))},this.hideOptions=function(){this.isShowingOptions=!1},this.toggleOptions=function(){this.isShowingOptions?this.hideOptions():this.showOptions()},this.hasOptions=function(){return this.options.length>0},this.selectByInput=function(e){e=e.toLowerCase(),M+=e;var n=new RegExp("^"+M,"i"),t=this.options.find(function(e){var t=v(e);return String(t).match(n)});if(t){var i=this.options.findIndex(function(e){return e===t});this.select(t,i,!0)}V()},this.select=function(e,n,t){if(!this.isDisabled){t?g():this.hideOptions();var i=$(e,n);this.onChange({value:i,option:e})}},this.setSelection=function(e){C=e},this.isSelection=function(e){return C===e},this.confirmSelection=function(e){"undefined"==typeof e&&(e=C);var n=void 0;if(this.isNullable&&e===-1)n=null;else{if(!this.hasOptions()||"undefined"==typeof e||"undefined"==typeof this.options[e])return;n=this.options[e]}this.select(n,e)}}]})}(window,window.angular),function(e,n,t){"use strict";n.module("TypeAhead.Component",[]).component("typeAhead",{template:'<div class="TypeAhead {{$ctrl.typeAheadClass}}">\n      <input class="Input {{$ctrl.inputClass}}" type="text"\n        placeholder="{{$ctrl.placeholder}}"\n        ng-keydown="$ctrl.keydown($event)"\n        ng-keyup="$ctrl.keyup($event)"\n        ng-disabled="$ctrl.isDisabled"\n        ng-model="$ctrl.searchQuery">\n      <spinner class="Spinner--input" ng-if="$ctrl.isSearching"></spinner>\n      <ul class="TypeAhead-results" ng-if="$ctrl.isShowingResults">\n        <li\n          ng-repeat="item in $ctrl.results"\n          ng-class="{selected: $ctrl.isSelection($index)}"\n          ng-mouseover="$ctrl.setSelection($index)"\n          ng-click="$ctrl.confirmSelection($index)"\n          ng-transclude>\n          <span ng-bind-html="$ctrl.getLabel(item) |\n            markmatches:$ctrl.searchQuery:\'strong\'"></span>\n        </li>\n      </ul>\n    </div>',transclude:!0,require:{ngModel:"ngModel"},bindings:{model:"<ngModel",inputClass:"@",options:"<",placeholder:"@",debounce:"<",onSearch:"&",onChange:"&",onQuery:"&",isDisabled:"<ngDisabled",labelBy:"@",trackBy:"@",asObject:"@",minLength:"@",allowNew:"@"},controller:["$element","$scope","$formControls","$attrs","$log","$q","$timeout","$document",function(e,i,l,s,o,r,a,u){function c(e){var n=[A,j,V,I,B,R,L,T,U,q,E,Q,P];return n.indexOf(e.keyCode)>-1}function d(e){!v[0].contains(e.target)&&k.isShowingResults&&(i.$apply(k.hideResults.bind(k)),e.preventDefault(),e.stopPropagation())}function h(){if(k.isShowingResults&&(k.isNullable||!(w<0))){var e=v.next().next(),n=e.find("li"),t=n[w+(k.isNullable?1:0)];if(t){var i=e[0].scrollTop,l=i+e[0].clientHeight,s=t.offsetTop,o=s+t.clientHeight;s<i?e[0].scrollTop-=i-s:o>l&&(e[0].scrollTop+=o-l)}}}function f(){var e=w;"undefined"==typeof w?k.isNullable?w=-1:k.results.length>0&&(w=k.results.length-1):w>(k.isNullable?-1:0)&&w--,e!==w&&h()}function p(){var e=w;"undefined"==typeof w?k.isNullable?w=-1:k.results.length>0&&(w=0):w<k.results.length-1&&w++,e!==w&&h()}function g(e){return null!==e&&n.isObject(e)?S?"undefined"==typeof e[S]?(o.warn("Unknown property `"+S+"` for type ahead tracking"),null):e[S]:(o.warn("Missing track-by property for type ahead"),null):e}function y(e){return x?e:g(e)}function b(e){return null===e||"undefined"==typeof e?"":n.isObject(e)?C?"undefined"==typeof e[C]?(o.warn("Unknown property `"+C+"` for type ahead label"),""):e[C]:(o.warn("Missing label-by property for type ahead"),""):e}function m(e,n){if("undefined"==typeof e||e===k.nullValue)return null;if("$index"===S)return"undefined"!=typeof n[e]?n[e]:null;var t=g(e,e);return n.find(function(e,n){var i=g(e,n);return t===i})}function $(e){if(!e)return r.resolve([]);var n=new RegExp("(?:^|\\b)("+e+")","i"),t=k.options.filter(function(e){var t=b(e);return n.test(t)});return r.resolve(t)}var v=void 0,w=-1,k=this,C=s.labelBy||null,S=s.trackBy||null,x="true"===s.asObject,O="true"===s.allowNew,D=0,M=0,N=null,B=13,R=27,L=9,V=37,A=38,I=39,j=40,T=16,U=17,q=18,E=20,Q=91,P=93;this.$onInit=function(){v=e.find("input"),e.attr("tabindex",-1),e.on("focus",function(){v[0].focus()}),this.typeAheadClass=e[0].className,e[0].className="",u.find("body").on("click",d),this.results=[],this.isSearching=!1,this.isShowingResults=!1,this.ngModel.$isEmpty=function(){return(null===k.model||"undefined"==typeof k.model)&&(!O||!k.searchQuery)}},this.$onDestroy=function(){u.find("body").off("click",d)},this.$onChanges=function(e){if(e.model){if(this.model){var t=void 0;n.isArray(this.options)?t=m(this.model,this.options):n.isObject(this.model)&&(t=this.model),t&&(this.searchQuery=b(t))}this.ngModel.$validate(),l.hasChanged(e.model)&&this.ngModel.$setDirty()}},this.getLabel=function(e){return b(e)},this.keydown=function(e){this.isShowingResults?e.keyCode===A?(e.preventDefault(),f()):e.keyCode===j?(e.preventDefault(),p()):e.keyCode===R?(e.preventDefault(),this.hideResults()):e.keyCode===L?this.hideResults():e.keyCode===B&&(e.preventDefault(),this.confirmSelection()):e.keyCode===B&&(e.preventDefault(),this.showResults())},this.keyup=function(e){if(!c(e)){var n=(this.searchQuery||"").trim();n!==this.lastValue&&(this.lastValue=n,this.onQuery({value:n}),this.onChange({value:null,option:null}),this.ngModel.$validate(),this.ngModel.$setDirty(),N&&a.cancel(N),!this.minLength||n.length>=this.minLength?this.search(n):this.hasResults()&&(this.clearResults(),this.clearSelection()))}},this.search=function(e){var n=this;return N=a(function(){return N=null,n.doSearch(e)},this.debounce||250)},this.doSearch=function(e){var t=this,i=void 0;if(this.options&&n.isArray(this.options))i=$(e);else{if(!s.onSearch)return o.warn("No search handler or options specified"),r.reject();i=this.onSearch({value:e})}return this.isSearching=!0,i.then(function(e){return++D>M?e:r.reject("old search")}).then(function(e){t.clearSelection(),t.results=e,e&&e.length>0&&(t.isShowingResults=!0),M=D})["finally"](function(){return t.isSearching=!1})},this.hasResults=function(){return this.results&&this.results.length>0},this.clearResults=function(){this.results=[],this.isShowingResults=!1},this.showResults=function(){this.hasResults()&&(this.isShowingResults=!0)},this.select=function(e){if(!this.isDisabled){this.hideResults();var n=y(e),t=b(e);this.searchQuery=t,this.onQuery({value:t}),this.onChange({value:n,option:e})}},this.hideResults=function(){this.isShowingResults=!1},this.setSelection=function(e){w=e},this.isSelection=function(e){return w===e},this.clearSelection=function(){w=t},this.confirmSelection=function(e){"undefined"==typeof e&&(e=w),0!==this.results.length&&"undefined"!=typeof this.results[e]&&this.select(this.results[e])}}]})}(window,window.angular);
//# sourceMappingURL=angular-form-controls.min.js.map
